(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{250:function(e,t){},258:function(e,t){["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(",")},261:function(e,t,a){e.exports=a.p+"static/media/dxc.756a28b8.png"},265:function(e,t,a){e.exports=a(562)},270:function(e,t,a){},467:function(e,t){},469:function(e,t){},503:function(e,t){},504:function(e,t){},548:function(e,t){},549:function(e,t){},558:function(e,t,a){e.exports=a.p+"static/media/feedback.6ef6da11.png"},560:function(e,t,a){},561:function(e,t,a){},562:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),s=(a(270),a(49)),o=a.n(s),i=a(68),u=a(8),m=a(10),d=a(12),p=a(11),_=a(13),h=a(45),f=a(56),b=a(9),y=a(26),E=a(7),g="FETCHING",v="STOP_FETCHING",O=a(5),C=a.n(O);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}C.a.defaults.baseURL="https://localhost:443";var k=function e(t,a,n){var r=this;Object(u.a)(this,e),this.addData=function(){return function(e){C.a.post("/api/".concat(r.endpoint,"/"),r.data).then((function(t){e({type:r.dispatchType,payload:t.data})})).catch((function(e){return console.log(e.response)}))}},this.deleteData=function(){return function(e){C.a.delete("/api/".concat(r.endpoint,"/").concat(r.data.id)).then((function(t){e({type:r.dispatchType,payload:r.data})})).catch((function(e){return console.log(e.response)}))}},this.editData=function(){return function(e){C.a.put("/api/".concat(r.endpoint,"/").concat(r.data.id,"/"),r.data).then((function(t){e({type:r.dispatchType,payload:t.data})})).catch((function(e){return console.log(e.response)}))}},this.endpoint=t,this.data=a,this.dispatchType=n},j=function(e){return function(t){C.a.get("/api/findings_and_investigation/?ccms_rca__id=".concat(e)).then((function(e){t({type:"GET_FNI_LIST",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},T=function(e){return function(t){C.a.get("/api/ccms_rca/?ccms__id=".concat(e.id)).then((function(e){t({type:"GET_CCMS_RCA",payload:e.data}),C.a.get("/api/findings_and_investigation/?ccms_rca__id=".concat(e.data[0].id)).then((function(e){t({type:"GET_FNI_LIST",payload:e.data}),C.a.get("/api/corrective_action/?fni__ccms_rca__id=".concat(e.data[0].ccms_rca)).then((function(e){t({type:"GET_CA_LIST",payload:e.data})}))})).catch((function(e){return console.log(e.response)}))}))}},w=function(e,t,a){return function(n){n({type:g}),a.date_acknowledged?C.a.put("/api/ccms/".concat(t,"/"),e).then((function(e){n({type:"UPDATE_CCMS",payload:e.data}),n({type:v})})).catch((function(e){return console.log(e.response)})):Promise.all([C.a.put("/api/ccms/".concat(t,"/"),e),C.a.post("/api/comments/",{contributor:e.cba_auth_user,ccms:D({},e,{id:a.id}),ccms_status:e.ccms_status,entry:"Assigned by ".concat(e.cba_auth_user.fullname)})]).then((function(e){var t=Object(y.a)(e,2),a=t[0],r=t[1];n({type:"COMPLETE_CCMS",payload:{completed_ccms:a.data,comment:r.data}}),n({type:v})})).catch((function(e){console.log(e.response,e)}))}},A=function(){return function(e){e({type:g}),C.a.get("/api/business_unit/").then((function(t){e({type:"GET_BUSINESS_UNIT",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},N=a(591),x=a(567),P=a(568),F=a(586),R=a(16),M=a(46),I=(a(107),a(583)),L=a(581),z=a(589),B=a(590),U=a(569),q=a(576),G=a(584),Y=a(256);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=[{Header:"CCMS ID",accessor:"id"},{Header:"Escalator Name",accessor:"escalated_by"},{Header:"Ticket Status",id:"ticket_status",accessor:function(e){return(e.ticket_status||{}).name}},{Header:"Bucket Age",accessor:"mail_age",Cell:function(e){return Q(e)}}],H={fontWeight:"bold"},Q=function(e){var t=e.value;return t>=0&&t<=5?r.a.createElement("div",{style:W({},H,{color:"green"})},"0 to 5"):t>=6&&t<=10?r.a.createElement("div",{style:W({},H,{color:"blue"})},"6 to 10"):t>=11&&t<=30?r.a.createElement("div",{style:W({},H,{color:"red"})},"11 to 30"):t>=30&&t<=160?r.a.createElement("div",{style:W({},H,{color:"gray"})},"30 to 160"):t>161?r.a.createElement("div",{style:W({},H,{color:"black"})},"".concat(t," days")):void 0},X=a(601),J=a(564),Z=a(565),$=a(566),ee=function(e){var t=e.parentCallback,a=e.value,c=e.ccms_entry_id,l=e.isOpen,s=e.parentToggle,o=Object(n.useState)(!1),i=Object(y.a)(o,2),u=i[0],m=i[1],d=function(e){console.log("No working"),"Yes"==e?t({is_sending:e,value:a,ccms_entry_id:c},m(!u)):t({is_sending:e})};return r.a.createElement(n.Fragment,null,r.a.createElement(X.a,{isOpen:l,toggle:s},r.a.createElement(J.a,{toggle:s},"Submit Form"),r.a.createElement(Z.a,null,"Are you sure you want to submit this ",a,"?"),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",onClick:function(e){return d(e.target.value)},value:"Yes"},"Yes")," ",r.a.createElement(Y.a,{color:"secondary",onClick:function(e){return d(e.target.value)},value:"No"},"No"))))},te=a(41),ae=a(570),ne=a(571),re=a(572),ce=a(573),le=a(574),se=a(575),oe=a(602),ie=(n.Component,function(e){var t=Object(n.useState)(!1),a=Object(y.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(y.a)(s,2),i=(o[0],o[1],e.comments.length>5?e.comments.slice(Math.max(e.comments.length-5,1)):e.comments),u={backgroundColor:"white",color:"black",display:"inline",paddingLeft:"10px",paddingRight:"10px",borderRadius:"25px",paddingTop:"3px",paddingBottom:"3px",fontSize:"15px",marginRight:"8px"},m={fontSize:"12px",marginTop:"6px",marginLeft:"5px"},d={fontSize:"14px",color:"blue",cursor:"pointer"},p=function(){return l(!c)},_=function(e){return e.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:u},r.a.createElement("span",{style:{color:"blue",fontWeight:"bold"}},e.contributor.fullname)),r.a.createElement("p",{style:u},r.a.createElement("span",null,r.a.createElement("strong",null,e.ccms_status_during_comment),":"," "),e.entry),r.a.createElement("p",{style:m},"date posted: ",e.comment_entry_date))}))};return e.comments.length>5&&!c?r.a.createElement(n.Fragment,null,r.a.createElement("p",{style:d,onClick:p},"Show all..."),_(i)):r.a.createElement(n.Fragment,null,e.comments.length>5?r.a.createElement("p",{style:d,onClick:p},"Hide..."):null,_(e.comments))}),ue=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r="ccms_status"===n?a.props.ccms.ccms_status[t.value]:t.value;a.setState(Object(E.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.props.add_comment(a.state)},a.toggleDropDown=function(){return a.setState({dropdownOpen:!a.state.dropdownOpen})},a.getList=function(e){return a.props.comments.filter((function(t){return(t.ccms||{}).id==e}))},a.state={dropdownOpen:!1,ccms:e.ccms_entry,entry:"",ccms_status:null!=(e.ccms_entry||{}).ccms_status?(e.ccms_entry||{}).ccms_status:"",ccms_entry_comments:e.ccms_entry_comment,contributor:(e.auth||{}).user},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.ccms_status,c=t.entry,l=t.ccms;return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement("h4",null,"Comments / Updates"))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,0!=this.getList(l.id).length?r.a.createElement(ie,{comments:this.getList(l.id)}):r.a.createElement("p",null,"No comments..."))),r.a.createElement(U.a,{onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement(ae.a,{row:!0},r.a.createElement(P.a,null,r.a.createElement(ne.a,{className:"mb-4"},r.a.createElement(re.a,{addonType:"prepend",isOpen:this.state.dropdownOpen,toggle:this.toggleDropDown},r.a.createElement(ce.a,{color:"primary",caret:!0},a.name),r.a.createElement(le.a,null,this.props.ccms.ccms_status.map((function(t,a){return r.a.createElement(se.a,{key:t.id,value:a,onClick:e.handleChange,name:"ccms_status"},t.name)})))),r.a.createElement(q.a,{name:"entry",value:c,onChange:this.handleChange,placeholder:"Enter comment here..."}),r.a.createElement(oe.a,{addonType:"append"},r.a.createElement(Y.a,{color:"success"},r.a.createElement("i",{className:"fas fa-paper-plane"}))))))))}}]),t}(n.Component),me=Object(b.b)((function(e){return{ccms:e.ccms,ccms_status_list:e.ccms.ccms_list,comments:e.ccms.comments,auth:e.auth}}),{add_comment:function(e){return function(t){C.a.post("/api/comments/",e).then((function(e){t({type:"ADD_COMMENT",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(ue),de=(a(3),a(582)),pe=a(577),_e=function(e){return e.replace(/(^\w{1})|(\s{1}\w{1})/g,(function(e){return e.toUpperCase()}))},he=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).typeaheadProps=function(e,t){return{bsSize:"sm",labelKey:a.props.labelKey,onChange:function(t){return a.props.onChange(t[0],e)},id:t,options:a.props.select_options?a.props.select_options:[],selected:a.props.value?[a.props.value]:[],placeholder:"Select...",selectHintOnEnter:!0,clearButton:!0,name:e}},a.state={},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size,a=e.name,n=e.onChange,c=e.value,l=e.form_title,s=a.replace(/(select_|text_|textarea_)/i,""),o="id_"+l+s;return r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:o},_e(s.replace("_"," "))),a.includes("select_")?r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps(a,o),{inputProps:{required:!0}})):r.a.createElement(q.a,{bsSize:t,type:"textarea",name:a,id:o,onChange:function(e){var t=e.target,a=t.value,r=t.name;return n(a,r)},value:c,required:!0}))}}]),t}(n.Component),fe=Object(b.b)(null,{})(he),be=function(e){var t=e.parentCallback,a=e.modal,n=e.formattedFormTitle,c=e.form_inputs,l=e.toggleModal;return r.a.createElement(X.a,{isOpen:a,toggle:l},r.a.createElement(J.a,{toggle:l},n),r.a.createElement(Z.a,null,"Sending ",n," for ticket"," ",(c.fni||{}).ticket_number?c.fni.ticket_number:null,"?"),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",value:"Yes",onClick:function(e){return t(e.target.value)}},"Yes")," ",r.a.createElement(Y.a,{color:"secondary",onClick:l},"Cancel")))},ye=a(578),Ee=a(603),ge=a(579),ve=a(580),Oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,a=e.form_title,c=["id","fni","description"],l=function(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)}))};return r.a.createElement(ye.a,{style:{color:"white",fontSize:"14px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,l(t[0],c).map((function(e,t){return r.a.createElement("th",{key:t},e.replace("_"," "))})))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement("tr",{key:t,id:"id_table_".concat(a,"_item_").concat(e.id),style:{cursor:"pointer"},className:"dynamic_list_row"},l(e,c).map((function(t,a){return r.a.createElement("td",{key:a},e[t])})),r.a.createElement(Ee.a,{trigger:"legacy",placement:"top",target:"id_table_".concat(a,"_item_").concat(e.id),key:t,className:"popover-container"},r.a.createElement(ge.a,null,r.a.createElement("p",null,r.a.createElement("span",null,_e(a.replace("_"," ")),":"," "),e.ticket_number)),r.a.createElement(ve.a,null,r.a.createElement("p",null,r.a.createElement("span",null,"Ticket Number: ")," ",e.ticket_number),r.a.createElement("p",null,r.a.createElement("span",null,"Submitted Date:")," ",e.submitted_date),r.a.createElement("p",null,r.a.createElement("span",null,"Description:")," ",e.description)))))}))))}}]),t}(n.Component),Ce=Object(b.b)(null,{})(Oe);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ke=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggleModal=function(){return a.setState({isModalOpen:!a.state.isModalOpen})},a.parentCallback=function(e){var t=De({},a.state.form_inputs),n={};if(Object.keys(t).forEach((function(e){var a=e.replace(/(select_|text_|textarea_)/i,""),r=Object(E.a)({},a,t[e]);n=De({},n,{},r)})),"Yes"===e)switch(a.state.form_title){case"corrective_actions":a.props.submit_ca(n);break;case"change_owner":console.log(n),console.log(a.props.ccms_entry.id),a.props.update_ccms(De({},n,{cba_auth_user:a.props.cba_auth_user}),a.props.ccms_entry.id,a.props.ccms_entry)}Object.keys(t).forEach((function(e){return t[e]=""})),a.setState({form_inputs:t}),a.toggleModal()},a.handleChange=function(e,t){var n=De({},a.state.form_inputs);n[t]=e,a.setState({form_inputs:n})},a.handleSubmit=function(e){e.preventDefault(),a.toggleModal()};var n=e.form_title,r=e.form_inputs;return a.state={form_title:n,form_inputs:De({},r),isModalOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.form_title,c=t.form_inputs,l=t.isModalOpen,s=c?Object.keys(c):null,o=_e(a.replace("_"," ")),i={fontWeight:"bold",fontSize:"18px"};return r.a.createElement(n.Fragment,null,r.a.createElement(be,{modal:l,toggleModal:this.toggleModal,parentCallback:this.parentCallback,formattedFormTitle:o,form_inputs:c,form_title:a}),r.a.createElement(L.a,{body:!0,className:"mb-2"},r.a.createElement(U.a,{autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement(de.a,{style:i},a?o:"No Title Provided"),s?s.map((function(t,n){return r.a.createElement(fe,{form_title:a,key:n,size:"sm",name:t,onChange:e.handleChange,value:c[t],select_options:e.props.select_options,labelKey:e.props.labelKey})})):"No Inputs",r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(P.a,null,r.a.createElement(Y.a,{color:"primary"},r.a.createElement("i",{className:"fas fa-paper-plane mr-1"}),"Submit ",o))),this.props.display_list&&this.props.display_list.length?r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{style:i},"List of ",o),r.a.createElement(Ce,{list:this.props.display_list,form_title:a})):null)))}}]),t}(n.Component),je=Object(b.b)((function(e){return{fni_list:e.ccms.fni,cba_auth_user:e.auth.user}}),{submit_ca:function(e){return function(t){C.a.post("/api/corrective_action/",D({fni:e.ticket_number.id},e)).then((function(e){t({type:"SUBMIT_CA",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},update_ccms:w})(ke),Te=function(e){var t=e.modal,a=e.toggle,n=e.parentCallback,c=e.ccms_rca,l=c.completed_on?"Update":"Submit";return r.a.createElement("div",null,r.a.createElement(X.a,{isOpen:t,toggle:a},r.a.createElement(J.a,{toggle:a,style:{backgroundColor:"green"}},l," CCMS RCA ID ",c.id),r.a.createElement(Z.a,null,r.a.createElement("p",null,"Are you sure you want to ",l," CCMS RCA ID"," ",c.id," ")),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",value:"Yes",onClick:function(e){return n(e.target.value)}},"Yes")," ",r.a.createElement(Y.a,{color:"secondary",onClick:a},"No"))))};function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ne=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name,c=Ae({},a.state.ccms_rca_state);c[r]=n,a.setState({ccms_rca_state:c},(function(){return console.log(a.state.ccms_rca_state)}))},a.exemptions=["escalation_driver","escalation_driver_cause"],a.typeaheadProps=function(e){return{bsSize:"sm",labelKey:"name",onChange:function(t){var n=Ae({},a.state.ccms_rca_state);return n[e]=t[0],"cause_code"!==e||t[0]?"escalation_driver"!==e||t[0]||(n.escalation_driver_cause=null):(n.escalation_driver=null,n.escalation_driver_cause=null),a.setState({ccms_rca_state:n})},id:"id_rca_"+e,options:a.exemptions.includes(e)?a.filteredDriverList(a.props[e],a.state.ccms_rca_state,e):a.props[e],selected:a.state.ccms_rca_state[e]?a.exemptions.includes(e)&&!a.state.ccms_rca_state.cause_code?[]:[a.state.ccms_rca_state[e]]:[],placeholder:"Select...",selectHintOnEnter:!0,clearButton:!0,name:e}},a.filteredDriverList=function(e,t,a){return"escalation_driver"==a||"escalation_driver_cause"===a?e.filter((function(e){return t.cause_code&&t.escalation_driver?e.escalation_driver==t.escalation_driver.id:t.cause_code?e.cause_code==t.cause_code.id:void 0})):e},a.handleSubmit=function(e){e.preventDefault(),a.setState({modal:!0})},a.parentCallback=function(e){var t=a.props,n=t.complete_ccms_rca,r=t.ccms_rca,c=Ae({},a.state.ccms_rca_state);console.log(e),"Yes"===e&&n({ccms_rca:r,ccms_rca_state:c}),a.toggle()},a.toggle=function(){a.setState({modal:!a.state.modal})};var n=e.ccms_rca,r=n.agent_name,c=n.ticket_description,l=n.ccms_ticket_description,s=n.team_spg_accountability,o=n.business_unit,i=n.specific_bu,m=n.agent_silo,_=n.controllability,h=n.cause_code,f=n.escalation_driver,b=n.escalation_driver_cause,y=n.event_description,E=n.ticket_number;return a.state={ccms_rca_state:{agent_name:r||"",ticket_description:c||"",ccms_ticket_description:l||"",team_spg_accountability:s||"",business_unit:o||"",specific_bu:i||"",agent_silo:m,controllability:_,cause_code:h,escalation_driver:f,escalation_driver_cause:b,event_description:y||"",ticket_number:E||""},modal:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ccms_rca,a=e.ccms,c=this.state,l=(c.agent_name,c.agent_silo,c.escalated_ticket,c.ccms_rca_state),s=c.modal,o={fontWeight:"bold",fontSize:"18px"};return r.a.createElement(n.Fragment,null,r.a.createElement(Te,{modal:s,toggle:this.toggle,parentCallback:this.parentCallback,ccms_rca:t}),r.a.createElement(L.a,{body:!0},r.a.createElement(U.a,{style:{fontSize:"14px"},autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement(de.a,{style:o},"TICKET AND AGENT INFORMATION"),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_escalated_ticket"},"Escalated Ticket"),r.a.createElement(q.a,{bsSize:"sm",type:"text",name:"escalated_ticket",id:"id_rca_escalated_ticket",disabled:!0,value:a.escalated_ticket})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_agent_name"},"Agent's Name"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"agent_name",id:"id_rca_agent_name",value:l.agent_name})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_agent_silo"},"Agent's Silo"),r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps("agent_silo"),{inputProps:{required:!0}}))),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_ticket_description"},"Ticket's Description"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"ticket_description",id:"id_rca_ticket_description",value:l.ticket_description})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_summary_complaint"},"Captured Issue"),r.a.createElement(q.a,{bsSize:"sm",type:"text",name:"summary_complaint",id:"id_rca_summary_complaint",disabled:!0,value:a.summary_complaint})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_ccms_ticket_description"},"CCMS Ticket Description"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"ccms_ticket_description",id:"id_rca_ccms_ticket_description",value:l.ccms_ticket_description})),r.a.createElement(de.a,{style:o},"RCA DETAILS"),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_controllability"},"Controllability"),r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps("controllability"),{inputProps:{required:!0}}))),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_cause_code"},"Cause Code"),r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps("cause_code"),{inputProps:{required:!0}}))),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_escalation_driver"},"Escalation Driver"),r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps("escalation_driver"),{inputProps:{required:!0},disabled:!l.cause_code}))),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_escalation_driver_causer"},"Escalation Driver Cause"),r.a.createElement(te.Typeahead,Object.assign({},this.typeaheadProps("escalation_driver_cause"),{inputProps:{required:!0},disabled:!l.escalation_driver||!l.cause_code}))),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_team_spg_accountability"},"Team (SPG Accountability)"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"team_spg_accountability",id:"id_rca_team_spg_accountability",value:l.team_spg_accountability})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_business_unit"},"Business Unit"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"business_unit",id:"id_rca_business_unit",value:l.business_unit})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_specific_bu"},"Specific BU"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"text",name:"specific_bu",id:"id_rca_specific_bu",value:l.specific_bu})),r.a.createElement(de.a,{style:o},"SUMMARY"),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_ticket_number"},"Ticket Number"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"input",name:"ticket_number",id:"id_rca_ticket_number",value:l.ticket_number})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_rca_event_description"},"Event Description"),r.a.createElement(q.a,{onChange:this.handleChange,bsSize:"sm",type:"textarea",name:"event_description",id:"id_rca_event_description",value:l.event_description,rows:4})),t.completed_on?r.a.createElement(Y.a,{color:"success"},r.a.createElement("i",{className:"fas fa-pen mr-1"}),"Update RCA"):r.a.createElement(Y.a,{color:"primary"},r.a.createElement("i",{className:"fas fa-paper-plane mr-1"}),"Complete RCA"))))}}]),t}(n.Component),xe=Object(b.b)((function(e){return{agent_silo:e.ccms.silo,controllability:e.ccms.accountable_team,cause_code:e.ccms.cause_code,escalation_driver:e.ccms.escalation_driver,escalation_driver_cause:e.ccms.escalation_driver_cause}}),{complete_ccms_rca:function(e){return function(t){C.a.put("/api/ccms_rca/".concat(e.ccms_rca.id,"/"),e.ccms_rca_state).then((function(e){t({type:"COMPLETE_CCMS_RCA",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(Ne),Pe=function(e){var t=e.modal,a=e.toggle,n=e.parentCallback,c=e.ccms_rca;return r.a.createElement("div",null,r.a.createElement(X.a,{isOpen:t,toggle:a},r.a.createElement(J.a,{toggle:a,style:{backgroundColor:"green"}},"CCMS RCA ID ",c.id),r.a.createElement(Z.a,null,r.a.createElement("p",null,"Are you sure you want to submit findings and investigation to CCMS RCA ID ",c.id," ")),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",value:"Yes",onClick:function(e){return n(e.target.value)}},"Yes")," ",r.a.createElement(Y.a,{color:"secondary",onClick:a},"No"))))},Fe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.fni_list;return r.a.createElement(n.Fragment,null,r.a.createElement(ye.a,{style:{color:"white",fontSize:"14px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,function(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)}))}(e[0],["id","ccms_rca","description"]).map((function(e,t){return r.a.createElement("th",{key:t},e.replace("_"," "))})))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",Object(E.a)({key:t,id:"id_table_data_item",style:{cursor:"pointer"},className:"dynamic_list_row"},"id","id_table_fni_item_".concat(e.id)),r.a.createElement("td",null,e.ticket_number),r.a.createElement("td",null,e.agent_name),r.a.createElement("td",null,e.submitted_date),r.a.createElement(Ee.a,{trigger:"legacy",placement:"top",target:"id_table_fni_item_".concat(e.id),key:t,className:"popover-container"},r.a.createElement(ge.a,null,r.a.createElement("p",null,r.a.createElement("span",null,"Findings and Investigation :"," "),e.ticket_number)),r.a.createElement(ve.a,null,r.a.createElement("p",null,r.a.createElement("span",null,"Ticket Number: ")," ",e.ticket_number),r.a.createElement("p",null,r.a.createElement("span",null,"Submitted Date:")," ",e.submitted_date),r.a.createElement("p",null,r.a.createElement("span",null,"Description:")," ",e.description))))})))))}}]),t}(n.Component),Re=Object(b.b)((function(e){return{fni_list:e.ccms.fni}}),{})(Fe);function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value,c=Ie({},a.state.fni);c[n]=r,a.setState({fni:c})},a.handleSubmit=function(e){e.preventDefault(),a.toggle()},a.parentCallback=function(e){var t=a.props,n=t.complete_fni,r=t.ccms_rca,c=Ie({},a.state.fni);"Yes"===e&&n(Ie({ccms_rca:r.id},c)),a.toggle()},a.toggle=function(){a.setState({modal:!a.state.modal})},a.state={fni:{agent_name:"",ticket_number:"",description:""},modal:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.fni,a=e.modal,c=this.props,l=c.ccms_rca,s=c.fni_list,o={fontWeight:"bold",fontSize:"18px"};return r.a.createElement(n.Fragment,null,r.a.createElement(Pe,{modal:a,toggle:this.toggle,parentCallback:this.parentCallback,ccms_rca:l}),r.a.createElement(L.a,{body:!0,className:"mb-2"},r.a.createElement(de.a,{style:o},"Findings and Investigation"),r.a.createElement(U.a,{onSubmit:this.handleSubmit,autoComplete:"off",style:{fontSize:"14px"},className:"mb-3"},r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_fni_ticket_number"},"Ticket Number"),r.a.createElement(q.a,{bsSize:"sm",type:"text",name:"ticket_number",id:"id_fni_ticket_number",onChange:this.handleChange,value:t.ticket_number,required:!0})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_fni_agent_name"},"Agent's Name"),r.a.createElement(q.a,{bsSize:"sm",type:"text",name:"agent_name",id:"id_fni_agent_name",onChange:this.handleChange,value:t.agent_name,required:!0})),r.a.createElement(ae.a,{size:"sm"},r.a.createElement(pe.a,{for:"id_fni_description"},"Description"),r.a.createElement(q.a,{bsSize:"sm",type:"textarea",name:"description",id:"id_fni_description",onChange:this.handleChange,value:t.description,rows:4,required:!0})),r.a.createElement(x.a,{className:"mb-2"},r.a.createElement(P.a,null,r.a.createElement(Y.a,{color:"primary"},r.a.createElement("i",{className:"fas fa-paper-plane mr-1"}),"Submit Findings")))),s&&s.length?r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{style:o},"List of Findings and Investigation"),r.a.createElement(Re,null)):null))}}]),t}(n.Component),ze=Object(b.b)((function(e){return{fni_list:e.ccms.fni}}),{complete_fni:function(e){return function(t){C.a.post("/api/findings_and_investigation/",e).then((function(e){t({type:"COMPLETE_FNI",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},get_fni_list:j})(Le),Be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getData=function(){a.props.get_ccms_rca(a.props.ccms)},a.toggleTab=function(e){var t=a.props,n=t.activeTab,r=t.toggle_active_tab;t.get_fni_list,t.ccms_rca;n!==e&&r(e)},a.checkStatus=function(e){return e.is_rca_completed?{color:"success",text:"Completed RCA",icon:"fas fa-check"}:{color:"danger",text:"Incomplete RCA",icon:"fas fa-exclamation"}},a.state={activeTab:1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ccms_rca_modal,a=e.ccms,c=e.ccms_rca,l=e.close_ccms_rca,s=(e.activeTab,e.fni_list),o=e.ca_list,i=this.checkStatus(a);return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{onClick:this.getData,color:i.color},r.a.createElement("i",{className:"".concat(i.icon," mr-1")}),i.text),r.a.createElement(X.a,{className:"modal-xl",isOpen:t&&a.id==c.ccms,toggle:l},r.a.createElement(J.a,{toggle:l},"CCMS RCA"),r.a.createElement(Z.a,null,r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(P.a,{className:"mb-2"},c?r.a.createElement(xe,{ccms_rca:c,ccms:a}):null),(c||{}).completed_on?r.a.createElement(P.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{sm:"12"},c?r.a.createElement(ze,{ccms_rca:c,ccms:a}):null)),r.a.createElement(x.a,{className:"mt-2"},r.a.createElement(P.a,{sm:"12"},s&&s.length?r.a.createElement(je,{form_title:"corrective_actions",form_inputs:{select_ticket_number:"",text_description:""},display_list:o,select_options:s,labelKey:"ticket_number"}):r.a.createElement("h4",null,"No data found")))):null))))}}]),t}(n.Component),Ue=Object(b.b)((function(e){return{ccms_rca:e.ccms.ccms_rca,ccms_rca_modal:e.ccms.ccms_rca_modal,activeTab:e.ccms.activeTab,fni_list:e.ccms.fni,ca_list:e.ccms.ca}}),{get_ccms_rca:T,close_ccms_rca:function(){return function(e){e({type:"CLOSE_RCA_MODAL"})}},toggle_active_tab:function(e){return function(t){t({type:"TOGGLE_ACTIVE_TAB",payload:e})}},get_fni_list:j})(Be),qe=a(585);function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ye=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Object(E.a)({},r,n))},a.handleClick=function(e){e.preventDefault();var t=e.target.value;"Compliment"===t?console.log("Trigger Compliment Request"):""===t&&console.log("Trigger Complaint Request")},a.arrayElements=["business_unit","escalation_type","accountable_team","site_code","ticket_status","ccms_owner","ticket_type","silo"],a.typeaheadProps=function(e){return{bsSize:"sm",labelKey:"ccms_owner"===e?function(e){return"".concat(e.user.email)}:"name",onChange:function(t){return a.setState(Object(E.a)({},e,t[0]))},id:"id_"+e,options:a.props[e],selected:a.state[e]?[a.state[e]]:[],disabled:!!a.props.list_type,placeholder:"Select...",selectHintOnEnter:!0,clearButton:!0,name:e}},a.inputProps=function(e){return{bsSize:"sm",type:"escalated_email_address"==e?"email":"text",name:e,id:"id_"+e,value:a.state[e],onChange:a.handleChange,disabled:!!a.props.list_type}},a.formContructor=function(e){return e.map((function(e,t){return r.a.createElement(x.a,{key:t,className:"mb-2"},e.map((function(e,t){var c=e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");return r.a.createElement(n.Fragment,{key:t},a.arrayElements.includes(e)?r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"id_"+e},c,": "),r.a.createElement(te.Typeahead,Object.assign({},a.typeaheadProps(e),{inputProps:{required:!0}}))):r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"id_"+e},c,": "),r.a.createElement(q.a,Object.assign({},a.inputProps(e),{required:!0}))))})))}))},a.convertToTwoDim=function(e){for(var t=[];e.length;)t.push(e.splice(0,3));return t},a.updateStateThenSend=function(e,t){"Complaint"==t?a.setState({is_complaint:!0,ccms_status:{id:1,name:"Open - Assigned"}},(function(){return a.submitForm(a.state,e)})):"Compliment"==t&&a.setState({is_complaint:!1,ccms_status:{id:10,name:"Closed"}},(function(){return a.submitForm(a.state,e)}))},a.callbackFunction=function(e){var t=e.is_sending,n=e.value,r=e.ccms_entry_id;if("No"==t)return a.setState({isOpen:!1});"Yes"==t&&a.updateStateThenSend(r,n)},a.submitForm=function(e,t){console.log(a.props.ccms_entry),a.props.update_ccms(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{cba_auth_user:a.props.cba_auth_user}),t,a.props.ccms_entry)},a.handleSubmit=function(e){e.preventDefault(),a.setState({isOpen:!a.state.isOpen})},a.toggleModalCallback=function(){a.setState({isOpen:!1})};var c=e.ccms_entry||{},l=c.ticket_status,s=c.ticket_type,o=c.business_unit,i=c.escalation_type,m=c.accountable_team,_=c.site_code,h=c.escalated_ticket,f=c.escalated_by,b=c.escalated_email_address,y=c.specific_business_unit,g=c.escalated_name,v=c.lan_id,O=c.silo,C=c.ccms_owner,S=c.summary_complaint,D=c.rca_required,k=c.is_complaint;return a.state={escalated_ticket:h,ticket_type:s,escalated_by:f,escalated_email_address:b,business_unit:o,specific_business_unit:y,ticket_status:l,escalation_type:i,accountable_team:m,escalated_name:g,lan_id:v,silo:O,site_code:_,ccms_owner:C,summary_complaint:S,rca_required:D,is_complaint:k,isOpen:!1,updateButton:!0,collapse:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=["summary_complaint","rca_required","is_complaint","isOpen","id","mail","ccms_status","mail_age","acknowledged_by","is_acknowledged","is_resolved","date_acknowledged","updateButton","collapse"];return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement("p",{style:{cursor:"pointer"},onClick:function(){return e.setState({collapse:!e.state.collapse})}},"Show Mail details..."))),r.a.createElement(I.a,{isOpen:this.state.collapse},r.a.createElement(Ve,{mail:this.props.ccms_entry.mail})),r.a.createElement(x.a,{className:"mb-2"},r.a.createElement(P.a,null,r.a.createElement(U.a,{autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement(ae.a,null,this.formContructor(this.convertToTwoDim(Object.keys(this.state).filter((function(e){return!t.includes(e)})))),r.a.createElement(pe.a,{for:"id_summary_complaint"},"Summary:"," "),r.a.createElement(q.a,{type:"textarea",rows:"4",name:"summary_complaint",id:"id_summary_complaint",value:this.state.summary_complaint,onChange:this.handleChange,required:!0,disabled:!!this.props.list_type})),r.a.createElement(x.a,null,this.props.list_type?null:r.a.createElement(P.a,null,r.a.createElement(ee,{isOpen:this.state.isOpen,parentToggle:this.toggleModalCallback,parentCallback:this.callbackFunction,value:this.state.is_complaint?"Complaint":"Compliment",ccms_entry_id:(this.props.ccms_entry||{}).id}),this.props.ccms_entry.ccms_status&&this.state.updateButton?r.a.createElement(Y.a,{name:"is_complaint",onClick:function(t){return e.setState({updateButton:!1})},color:"success",className:"mr-2"},r.a.createElement("i",{className:"fas fa-pen mr-1"}),"Update"):r.a.createElement(n.Fragment,null,r.a.createElement(G.a,null,r.a.createElement(Y.a,{type:"submit",name:"is_compliment",onClick:function(t){return e.setState({is_complaint:!1})},color:"success",className:"mr-1"},r.a.createElement("i",{className:"fas fa-thumbs-up mr-1"}),"Compliment"),r.a.createElement(Y.a,{type:"submit",name:"is_complaint",onClick:function(t){return e.setState(Object(E.a)({},t.target.name,!0))},color:"danger",className:"mr-1"},r.a.createElement("i",{className:"fas fa-thumbs-down mr-1"}),"Complaint"),this.props.ccms_entry.ccms_status?r.a.createElement(Y.a,{name:"is_complaint",onClick:function(t){return e.setState({updateButton:!0})},color:"warning",className:"mr-1"},r.a.createElement("i",{className:"fas fa-ban mr-1"}),"Cancel Update"):null))),r.a.createElement(P.a,{md:3,className:"mt-1"},this.props.list_type&&this.state.rca_required?r.a.createElement(Ue,{ccms:this.props.ccms_entry}):this.props.list_type&&!this.state.rca_required?r.a.createElement("h5",null,"RCA not required"):r.a.createElement(qe.a,{type:"checkbox",name:"rca_required",id:"id_rca_required",checked:this.state.rca_required,onChange:this.handleChange,disabled:!!this.props.list_type,label:"RCA required?"})))))),this.props.ccms_entry.ccms_status&&this.props.ccms_entry.ccms_owner?this.props.is_fetching_comments?r.a.createElement(F.a,null):r.a.createElement(me,{ccms_entry:this.props.ccms_entry}):null)}}]),t}(n.Component),Ve=function(e){var t=e.mail,a={textDecoration:"underline"},c=new Date(t.receivedDateTime).toString();return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(P.a,null,r.a.createElement(L.a,{body:!0,style:{fontSize:"14px"}},r.a.createElement(de.a,null,r.a.createElement(x.a,{className:"mb-1"},r.a.createElement(P.a,null,"Sender Name:"," ",r.a.createElement("span",{style:a},t.sender_name)),r.a.createElement(P.a,null,"Sender Email:"," ",r.a.createElement("span",{style:a},t.sender_email_address))),r.a.createElement(x.a,{className:"mb-1"},r.a.createElement(P.a,null,"Subject:"," ",r.a.createElement("span",{style:a},t.email_subject))),r.a.createElement(x.a,{className:"mb-1"},r.a.createElement(P.a,null,"Received Data and Time:"," ",r.a.createElement("span",{style:a},c)))),r.a.createElement(x.a,{className:"mb-1"},r.a.createElement(P.a,null,"Email Body:")),r.a.createElement(x.a,{className:"mb-1"},r.a.createElement(P.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.email_body}})))))))},We=Object(b.b)((function(e){return{business_unit:e.ccms.business_unit,ticket_status:e.ccms.ticket_status,escalation_type:e.ccms.escalation_type,accountable_team:e.ccms.accountable_team,site_code:e.ccms.site_code,ccms_owner:e.ccms.ccms_owner,comments:e.ccms.comments,silo:e.ccms.silo,ticket_type:e.ccms.ticket_type,is_fetching_comments:e.ccms.is_fetching_comments,cba_auth_user:e.auth.user}}),{get_business_unit:A,update_ccms:w,getComments:function(e){return function(t){t({type:g}),C.a.get("/api/comments/?ccms__id=".concat(e)).then((function(e){t({type:"GET_COMMENTS",payload:e.data}),t({type:v})})).catch((function(e){return console.log(e)}))}},get_ccms_rca:T})(Ye),Ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggle=function(){console.log("working"),a.props.get_selected_ccms_new(a.props.ccms_entry)},a.checkStatus=function(e){return e.ccms_owner?{color:a.props.ccms_entry.is_complaint?"dark":"success",text:"View Case",icon:a.props.ccms_entry.is_complaint?"fas fa-thumbs-down":"fas fa-thumbs-up"}:{color:"danger",text:"Unassigned Case",icon:"fas fa-exclamation"}},a.state={isOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.checkStatus(this.props.ccms_entry);return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{color:e.color,onClick:this.toggle},r.a.createElement("i",{className:"".concat(e.icon," mr-1")}),e.text),r.a.createElement(U.a,null,r.a.createElement(X.a,{style:{color:"white"},isOpen:this.props.modal&&this.props.selected_ccms.id==this.props.ccms_entry.id,toggle:this.props.close_modal,className:"modal-xl"},r.a.createElement(J.a,{toggle:this.props.close_modal,style:{color:"white",border:"1px solid white",backgroundColor:this.props.ccms_entry.is_complaint?"red":"green"}},"CCMS ID ",this.props.ccms_entry.id),r.a.createElement(Z.a,{style:{backgroundColor:"black",border:"1px solid white"}},r.a.createElement(We,{list_type:this.props.list_type,ccms_entry:this.props.selected_ccms})))))}}]),t}(n.Component),He=Object(b.b)((function(e){return{users_list:e.ccms.users_list,modal:e.ccms.modal,selected_ccms:e.ccms.selected_ccms}}),{open_collapse:function(){return function(e){e({type:"OPEN_COLLAPSE"})}},close_modal:function(){return function(e){e({type:"CLOSE_MODAL"})}},toggle_modal:function(){return function(e){e({type:"TOGGLE_MODAL"})}},get_selected_ccms_new:function(e){return function(t){t({type:"FETCHING_COMMENTS"}),C.a.get("/api/comments/?ccms__id=".concat(e.id)).then((function(a){t({type:"GET_SELECTED_CCMS",payload:{comments:a.data,selected_ccms:e}})}))}}})(Ke),Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault()},a.handleRemove=function(){a.props.remove_user_from_ccms_admin(a.state.ccms_admin_list)},a.handleAdd=function(){a.props.add_user_to_ccms_admin(a.state.ccms_owner)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.selectedOptions,c=a.props,l=(c.users_list,c.ccms_admin_list),s=c.ccms_owner;if("ccms_owner"==n){var o=Object(R.a)(r).map((function(e){return s.filter((function(e){return!e.user.groups.includes(1)}))[e.value]}));a.setState({ccms_owner:o},(function(){return console.log(a.state)}))}else"ccms_admin_list"==n&&a.setState({ccms_admin_list:Object(R.a)(r).map((function(e){return l[e.value]}))},(function(){return console.log(a.state)}))},a.getListofNotCcmsAdmin=function(e){return e.filter((function(e){return!e.groups.includes(1)}))},a.state={users_list:[],ccms_admin_list:[],ccms_owner:[]},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.ccms,t={color:"white"};return r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"mb-3"},r.a.createElement(U.a,null,r.a.createElement(ae.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(pe.a,{style:t,for:"id_users_list"},"CCMS Owner's List"),r.a.createElement(q.a,{type:"select",name:"ccms_owner",id:"id_ccms_owner",size:"7",onChange:this.handleChange},(e||{}).ccms_owner.filter((function(e){return!((e.user||{}).groups||{}).includes(1)})).map((function(e,t){var a=e.user,n=a.first_name,c=a.last_name;a.username;return r.a.createElement("option",{key:e.id,value:t},"".concat(n," ").concat(c))})))),r.a.createElement(P.a,{md:1,className:"my-auto"},r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"text-center"},r.a.createElement("i",{onClick:this.handleAdd,id:"ccms-btn-right",className:"fas fa-chevron-circle-right"}))),r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"text-center"},r.a.createElement("i",{onClick:this.handleRemove,id:"ccms-btn-left",className:"fas fa-minus-circle"})))),r.a.createElement(P.a,null,r.a.createElement(pe.a,{style:t,for:"id_ccms_admin"},"CCMS Administrators"),r.a.createElement(q.a,{type:"select",name:"ccms_admin_list",id:"id_ccms_admin_list",size:"7",onChange:this.handleChange},(e||{}).ccms_admin_list.map((function(e,t){var a=e.first_name,n=e.last_name;e.username;return r.a.createElement("option",{key:e.id,value:t},"".concat(a," ").concat(n))})))))))))}}]),t}(n.Component),Xe=Object(b.b)((function(e){return{ccms:e.ccms,ccms_admin_list:e.ccms.ccms_admin_list,users_list:e.ccms.users_list,ccms_owner:e.ccms.ccms_owner}}),{remove_user_from_ccms_admin:function(e){return function(t){e.forEach((function(e){C.a.put("/api/users/".concat(e.id,"/"),{groups:[]}).then((function(e){t({type:"REMOVE_USER_FROM_CCMS_ADMIN",payload:e.data}),t({type:v})})).catch((function(e){return console.log(e.response)}))}))}},add_user_to_ccms_admin:function(e){return function(t){e.forEach((function(e){C.a.put("/api/users/".concat(e.user.id,"/"),{groups:[1]}).then((function(e){t({type:"ADD_USER_TO_CCMS_ADMIN",payload:e.data}),t({type:v})})).catch((function(e){return console.log(e.response)}))}))}}})(Qe),Je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{onClick:this.toggle,color:this.props.color},r.a.createElement("i",{className:"fas fa-user-shield mr-1"}),"CCMS Admin"),r.a.createElement(X.a,{isOpen:this.state.isOpen,toggle:this.toggle,size:"lg"},r.a.createElement(J.a,{toggle:this.toggle},"CCMS Admin"),r.a.createElement(Z.a,{style:{backgroundColor:"black"}},r.a.createElement(Xe,null))))}}]),t}(n.Component),Ze=a(587),$e=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){var t=a.props.access_request,n=e.target.value;console.log(t[n]),a.setState({access_request:t[n]})},a.handleSubmit=function(e){e.preventDefault()},a.handleClick=function(){a.props.add_ccms_owner(a.state.access_request)},a.handleDeny=function(){a.props.add_ccms_owner(a.state.access_request)},a.state={access_request:null},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.access_request;return r.a.createElement(n.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(ae.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(pe.a,{style:{color:"white"},for:"id_users_list"},"Access Requests"),r.a.createElement(q.a,{type:"select",name:"access_request",id:"id_access_request",size:"7",onChange:this.handleChange},e.map((function(e,t){var a=e.user.username;return r.a.createElement("option",{key:e.id,value:t},a)}))),r.a.createElement(Y.a,{onClick:this.handleClick,className:"mt-3",color:"success"},"Approve"),r.a.createElement(Y.a,{className:"mt-3 ml-2",color:"danger",onClick:this.handleDeny},"Deny"))))))}}]),t}(n.Component),et=Object(b.b)((function(e){return{access_request:e.ccms.access_request}}),{add_ccms_owner:function(e){return function(t){console.log(e.user.user),C.a.post("/api/ccms_owners/",{user:e.user.user}).then((function(e){t({type:"ADD_CCMS_OWNER",payload:e.data})}),C.a.delete("/api/ccms_access_request/".concat(e.id)).then((function(a){t({type:"REMOVE_ACCESS_REQUEST",payload:e})}))).catch((function(e){return console.log(e.response)}))}}})($e),tt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggle=function(){return a.setState({isOpen:!a.state.isOpen})},a.state={isOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{onClick:this.toggle,color:this.props.color,className:"mr-1"},r.a.createElement(Ze.a,{style:{fontSize:"10px"},color:"danger"},this.props.requestCount),r.a.createElement("span",{className:"mx-1"},r.a.createElement("i",{id:"btn_ccms_admin",className:"fas fa-user-plus"})),"Access Request"),r.a.createElement(X.a,{isOpen:this.state.isOpen,toggle:this.toggle,size:"lg"},r.a.createElement(J.a,{toggle:this.toggle},"CCMS Access Requests"),r.a.createElement(Z.a,{style:{backgroundColor:"black"}},r.a.createElement(et,null))))}}]),t}(n.Component),at=function(e){var t=e.open,a=e.toggle,n=e.parentCallback,c=e.tableName,l=e.input,s=e.task,o=function(e){var t=e.target.value;n(t),a()};return r.a.createElement("div",null,r.a.createElement(X.a,{isOpen:t,toggle:function(e){return o(e)}},r.a.createElement(J.a,{style:function(e,t,a){return"add"==e?{style:{backgroundColor:"green",color:"black"},body:r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to add"," ",r.a.createElement("strong",null,t)," to"," ",r.a.createElement("strong",null,a)," table?"))}:"edit"==e?{style:{backgroundColor:"yellow",color:"black"},body:r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to change it to"," ",r.a.createElement("strong",null,t),"?"))}:"delete"==e?{style:{backgroundColor:"red",color:"black"},body:r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to delete"," ",r.a.createElement("strong",null,t),"?"))}:void 0}(s,l,c).style,toggle:function(e){return o(e)}},c),r.a.createElement(Z.a,null,"add"==s&&r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to add"," ",r.a.createElement("strong",null,l)," to"," ",r.a.createElement("strong",null,c)," table?")),"edit"==s&&r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to change it to"," ",r.a.createElement("strong",null,l),"?")),"delete"==s&&r.a.createElement("div",null,r.a.createElement("p",null,"Are you sure you want to delete"," ",r.a.createElement("strong",null,l),"?"))),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"success",onClick:function(e){return o(e)},value:"Yes"},"Yes")," ",r.a.createElement(Y.a,{color:"danger",onClick:function(e){return o(e)}},"No"))))},nt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state.isOpen;a.setState({isOpen:!t})},a.handleModalToggle=function(){a.setState({isOpen:!a.state.isOpen,name:""})},a.parentCallback=function(e){var t=a.props,n=t.editEscalationDriverCause,r=t.addEscalationDriverCause,c=t.addEscalationDriver,l=t.editEscalationDriver,s=t.add_cause_code,o=t.edit_cause_code,i=t.tableName,u=t.task,m=t.cancelEdit,d=t.driverDetails,p=t.selectedCode,_=a.state.name;if("Yes"==e)switch(i){case"Cause Code":if("add"==u){s({name:_});break}if("edit"==u){o(d,{name:_});break}case"Escalation Driver":if("add"==u){c({name:_,cause_code:p.id});break}if("edit"==u){l(d,{name:_,cause_code:d.cause_code});break}case"Escalation Driver Cause":if("add"==u){console.log(p),r({name:_,escalation_driver:p.id});break}if("edit"==u){n(d,{name:_,escalation_driver:d.escalation_driver});break}}m(),a.setState({name:""})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.handleKeyDown=function(e){27==e.keyCode&&a.props.cancelEdit()},a.state={name:"add"==e.task?"":e.driverDetails.name,isOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isOpen,n=t.name,c=this.props,l=c.tableName,s=c.task;return r.a.createElement(U.a,{autoComplete:"off",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(q.a,{bsSize:"sm",className:"w-200",required:!0,type:"text",name:"name",onKeyDown:function(t){return e.handleKeyDown(t)},onChange:function(t){return e.handleChange(t)},value:n,placeholder:"Input here..."}),r.a.createElement(at,{open:a,toggle:this.handleModalToggle,parentCallback:this.parentCallback,tableName:l,input:n,task:s}))}}]),t}(n.Component),rt=Object(b.b)(null,{add_cause_code:function(e){return function(t){console.log("FROM REDUX ACTION - ADD"),console.log(e),C.a.post("/api/cause_code/",e).then((function(e){t({type:"ADD_CAUSE_CODE",payload:e.data})}))}},edit_cause_code:function(e,t){return function(a){console.log("FROM REDUX ACTION - EDIT"),console.log("OLDDATA"),console.log(e),console.log("NewDATA"),console.log(t),C.a.put("/api/cause_code/".concat(e.id,"/"),t).then((function(e){a({type:"EDIT_CAUSE_CODE",payload:e.data})}))}},addEscalationDriver:function(e){return function(t){C.a.post("/api/escalation_driver/",e).then((function(e){t({type:"ADD_ESCALATION_DRIVER",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},editEscalationDriver:function(e,t){return function(a){console.log("FROM REDUX ACTION - EDIT"),console.log("OLDDATA"),console.log(e),console.log("NewDATA"),console.log(t),C.a.put("/api/escalation_driver/".concat(e.id,"/"),t).then((function(e){a({type:"EDIT_ESCALATION_DRIVER",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},addEscalationDriverCause:function(e){return function(t){C.a.post("/api/escalation_driver_cause/",e).then((function(e){t({type:"ADD_ESCALATION_DRIVER_CAUSE",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},editEscalationDriverCause:function(e,t){return function(a){console.log("FROM REDUX ACTION - EDIT"),console.log("OLDDATA"),console.log(e),console.log("NewDATA"),console.log(t),C.a.put("/api/escalation_driver_cause/".concat(e.id,"/"),t).then((function(e){a({type:"EDIT_ESCALATION_DRIVER_CAUSE",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(nt),ct=a(604);function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function st(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot=function(e){var t=e.driverDetails,a=e.color,c=e.tableName,l={cursor:"pointer"},s=Object(n.useState)(!1),o=Object(y.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(y.a)(m,2),p=d[0],_=d[1],h=Object(n.useState)(!1),f=Object(y.a)(h,2),E=f[0],g=f[1],v=Object(b.c)(),O={placement:"top",text:"Hide",target:"id_hide"},S={placement:"top",text:"Edit",target:"id_edit"},D={placement:"top",text:"Delete",target:"id_delete"};return r.a.createElement("div",null,r.a.createElement(at,{open:E,toggle:function(){g(!E)},parentCallback:function(e){var a;"Yes"==e&&("Cause Code"==c?v((a=t,function(e){C.a.delete("/api/cause_code/".concat(a.id,"/")).then((function(t){e({type:"DELETE_CAUSE_CODE",payload:a})}))})):"Escalation Driver"==c?v(function(e){return function(t){C.a.delete("/api/escalation_driver/".concat(e.id,"/")).then((function(a){t({type:"DELETE_ESCALATION_DRIVER",payload:e})}))}}(t)):"Escalation Driver Cause"==c&&v(function(e){return function(t){C.a.delete("/api/escalation_driver_cause/".concat(e.id,"/")).then((function(a){t({type:"DELETE_ESCALATION_DRIVER_CAUSE",payload:e})}))}}(t)))},tableName:c,input:t.name,task:"delete"}),r.a.createElement("div",{className:"float-left",style:st({},l,{color:a})},p?r.a.createElement(rt,{tableName:c,driverDetails:t,task:"edit",cancelEdit:function(){_(!1)}}):t.name),r.a.createElement("div",{className:"float-right",style:st({},l),onClick:function(){return u(!i)}},i||p?r.a.createElement("div",{style:{fontSize:"18px"}},p?r.a.createElement("i",{onClick:function(){return _(!1)},style:{color:"red"},className:"fas fa-ban"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"d-inline",onClick:function(){return g(!0)},style:{marginRight:"5px",color:"red"}},r.a.createElement("i",{className:"far fa-minus-square",id:"id_delete"}),r.a.createElement(ct.a,D,D.text)),r.a.createElement("div",{className:"d-inline",onClick:function(){return _(!0)},style:{color:"green",marginRight:"5px"}},r.a.createElement("i",{className:"fas fa-pencil-alt",id:"id_edit",style:{top:"20px"}}),r.a.createElement(ct.a,S,S.text)),r.a.createElement("div",{className:"d-inline"},r.a.createElement("i",{onClick:function(){return u(!i)},style:{color:"white"},className:"fas fa-angle-double-right",id:"id_hide"}),r.a.createElement(ct.a,O,O.text)))):r.a.createElement(n.Fragment,null,r.a.createElement("i",{className:"fas fa-ellipsis-h"}))))},it=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleEditOptionClick=function(){a.setState({addOption:!a.state.addOption})},a.state={selected:"",addOption:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.tableName,n=t.driverList,c=t.selectCallback,l=t.selectedCode,s=this.state,o=s.addOption,i=s.selected,u="id_"+a.replace(/\s/g,"_").toLowerCase();return r.a.createElement(ye.a,{dark:!0,hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x.a,{className:"text-warning"},r.a.createElement(P.a,{className:"d-flex justify-content-start"},a),r.a.createElement(P.a,{className:"d-flex justify-content-end"},r.a.createElement("i",{onClick:this.handleEditOptionClick,style:{cursor:"pointer"},className:"fas fa-plus-square",id:u}))),r.a.createElement(Ee.a,{placement:"left",isOpen:o,target:u,toggle:this.handleEditOptionClick,trigger:"legacy"},r.a.createElement(ge.a,null,"Add ",a),r.a.createElement(ve.a,null,r.a.createElement(rt,{tableName:a,task:"add",cancelEdit:this.handleEditOptionClick,selectedCode:l})))))),r.a.createElement("tbody",null,n.map((function(t,n){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{onClick:function(){e.setState({selected:t}),c(n,a)}},r.a.createElement(ot,{tableName:a,driverDetails:t,color:i.id==t.id?"green":null})))}))))}}]),t}(n.Component),ut=Object(b.b)((function(e){return{ccms:e.ccms}}),{})(it);function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var dt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleSelect=function(e,t){var n=a.props.ccms,r=n.cause_code,c=n.escalation_driver,l=n.escalation_driver_cause,s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mt(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.state.selected);"Cause Code"==t?(s.cause_code=r[e],s.escalation_driver="",s.escalation_driver_cause=""):"Escalation Driver"==t?(s.escalation_driver=a.filteredDriverList(c,s.cause_code,"Escalation Driver")[e],s.escalation_driver_cause=""):"Escalation Driver Cause"==t&&(s.escalation_driver_cause=a.filteredDriverList(l,s.escalation_driver,"Escalation Driver Cause")[e]),a.setState({selected:s})},a.filteredDriverList=function(e,t,a){return e.filter((function(e){return"Escalation Driver Cause"==a?e.escalation_driver==t.id:"Escalation Driver"==a?e.cause_code==t.id:void 0}))},a.state={selected:{cause_code:"",escalation_driver:"",escalation_driver_cause:""}},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.selected,t=this.props.ccms,a=t.cause_code,c=t.escalation_driver,l=t.escalation_driver_cause;return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,null,a?r.a.createElement(P.a,null,r.a.createElement(ut,{tableName:"Cause Code",driverList:a,selectCallback:this.handleSelect})):null,e.cause_code?r.a.createElement(P.a,null,r.a.createElement(ut,{tableName:"Escalation Driver",driverList:this.filteredDriverList(c,e.cause_code,"Escalation Driver"),selectCallback:this.handleSelect,selectedCode:e.cause_code})):null,e.escalation_driver?r.a.createElement(P.a,null,r.a.createElement(ut,{tableName:"Escalation Driver Cause",driverList:this.filteredDriverList(l,e.escalation_driver,"Escalation Driver Cause"),selectCallback:this.handleSelect,selectedCode:e.escalation_driver})):null))}}]),t}(n.Component),pt=Object(b.b)((function(e){return{ccms:e.ccms}}),{})(dt),_t=function(e){e.parentCallback;var t=e.modal,a=e.formattedFormTitle,n=e.form_inputs,c=e.toggleModal,l=e.ComponentForm,s=e.form_title,o=e.select_options,i=e.labelKey,u=e.size,m=e.ccms_entry,d=Object(b.d)((function(e){return e.ccms.selected_ccms})),p=Object(b.c)();return r.a.createElement("div",null,r.a.createElement(Y.a,{color:"danger",onClick:function(){var e;p((e=m,function(t){console.log(e),t({type:"GET_SELECTED_CCMS_ONLY",payload:e})})),c()}},a),d?r.a.createElement(X.a,{isOpen:t&&d.id===m.id,toggle:function(){p((function(e){e({type:"REMOVE_SELECTED_CCMS"})})),c()},size:u},r.a.createElement(J.a,{toggle:function(){p((function(e){e({type:"REMOVE_SELECTED_CCMS"})})),c()}},a),r.a.createElement(Z.a,null,r.a.createElement(l,{form_title:s,form_inputs:n,select_options:o,labelKey:i,ccms_entry:m}))):null)},ht=a(588),ft=function(e){var t=e.dataList,a=e.color,c=e.selectionCallback,l=(e.toggleCollapse,Object(n.useState)(!1)),s=Object(y.a)(l,2),o=s[0],i=s[1];return r.a.createElement(n.Fragment,null,r.a.createElement(ht.a,{isOpen:o,toggle:function(){return i(!o)},className:"mr-1"},r.a.createElement(ce.a,{color:a,caret:!0},r.a.createElement("i",{className:"fas fa-list mr-1"}),"Data Table List"),r.a.createElement(le.a,null,t.map((function(e,t){return r.a.createElement(se.a,{key:t,onClick:function(){c(e)},value:!0},e.name)})))))};function bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?bt(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Et=function(e){e.buttonLabel;var t=e.selectedDataName,a=(e.textColor,e.toggle),c=e.table,l=e.dispatchType,s={name:t},o=Object(n.useState)(s),i=Object(y.a)(o,2),u=i[0],m=i[1],d=u.name,p=new k(c.endpoint,u,l),_=Object(b.c)();return r.a.createElement("div",{className:"mb-3"},r.a.createElement(U.a,{onSubmit:function(e){e.preventDefault(),console.log(u,"Submit Working"),_(p.addData()),a()},autoComplete:"off"},r.a.createElement(ae.a,null,r.a.createElement(pe.a,{for:"id_general_data"},c.name," Name:"),r.a.createElement(q.a,{type:"text",id:"id_general_data",onChange:function(e){m(yt({},u,Object(E.a)({},e.target.name,e.target.value)))},value:d,name:"name",required:!0})),r.a.createElement(Y.a,{color:"primary"},"Submit")))},gt=function(e){var t=e.buttonLabel,a=e.selectedData,c=e.textColor,l=e.toggle,s=e.table,o=e.dispatchType,i=new k(s.endpoint,a,o),u=Object(b.c)();return r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Are you sure you want to"," ",r.a.createElement("span",{className:c},t)," ",a.name,"?"),r.a.createElement(G.a,null,r.a.createElement(Y.a,{className:"mr-1",color:"primary",onClick:function(){u(i.deleteData()),l()}},"Yes"),r.a.createElement(Y.a,{color:"secondary",onClick:l},"No")))},vt=function(e){var t=e.buttonLabel,a=e.selectedData,c=e.textColor,l=e.toggle,s=e.table,o=e.dispatchType,i={name:a.name},u=Object(n.useState)(i),m=Object(y.a)(u,2),d=m[0],p=m[1],_=d.name,h=new k(s.endpoint,yt({id:a.id},d),o),f=Object(b.c)(),g=Object(n.useState)(!1),v=Object(y.a)(g,2),O=v[0],C=v[1];return r.a.createElement("div",{className:"mb-3"},r.a.createElement(I.a,{isOpen:!O},r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement("p",null,"Are you sure you want to"," ",r.a.createElement("span",{className:c},t)," ",a.name,"?"))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(G.a,null,r.a.createElement(Y.a,{className:"mr-1",color:"primary",onClick:function(){return C(!O)}},"Yes"),r.a.createElement(Y.a,{className:"mr-1",color:"secondary",onClick:l},"No"))))),r.a.createElement(I.a,{isOpen:O},r.a.createElement(U.a,{onSubmit:function(e){e.preventDefault(),console.log(d,"Submit Working"),f(h.editData()),l()},autoComplete:"off"},r.a.createElement(ae.a,null,r.a.createElement(pe.a,{for:"id_general_data"},"Name:"),r.a.createElement(q.a,{type:"text",id:"id_general_data",onChange:function(e){console.log(yt({},d)),p(yt({},d,Object(E.a)({},e.target.name,e.target.value)))},value:_,name:"name",required:!0})),r.a.createElement(G.a,null,r.a.createElement(Y.a,{className:"mr-1",color:"primary"},"Submit"),r.a.createElement(Y.a,{className:"mr-1",color:"secondary",onClick:l},"Cancel")))))},Ot=function(e){var t=e.buttonLabel,a=e.className,c=e.data,l=e.table,s=e.color,o=Object(n.useState)(!1),i=Object(y.a)(o,2),u=i[0],m=i[1],d=function(){return m(!u)},p=function(e,t,a){var n=e.toUpperCase()+"_"+l.endpoint.toUpperCase();switch(e){case"Delete":return{bgColor:"bg-danger",content:r.a.createElement(gt,{buttonLabel:e,selectedData:t,textColor:"text-danger",toggle:a,table:l,dispatchType:n})};case"Edit":return{bgColor:"bg-warning",content:r.a.createElement(vt,{buttonLabel:e,selectedData:t,textColor:"text-warning",toggle:a,table:l,dispatchType:n})};case"Add":return{bgColor:"bg-success",content:r.a.createElement(Et,{buttonLabel:e,selectedDataName:t?t.name:"",textColor:"text-success",table:l,toggle:a,dispatchType:n})}}};return r.a.createElement(n.Fragment,null,r.a.createElement(Y.a,{color:s,onClick:d,className:"mr-1"},t.includes("Add")?"".concat(t," ").concat(l.name):"".concat(t)),r.a.createElement(X.a,{size:"lg",isOpen:u,toggle:d,className:a},r.a.createElement(J.a,{toggle:d,className:p(t).bgColor},t.includes("Add")?"".concat(t," data to ").concat(l.name," Table"):"".concat(t," ").concat(c.name," from ").concat(l.name," Table")),r.a.createElement(Z.a,null,p(t,c,d).content)))},Ct=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={filterOn:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.table,a=t.data.length&&Object.keys(t.data[0]).map((function(t){return{Header:t.charAt(0).toUpperCase()+t.slice(1),accessor:t,show:!t.includes("id"),filterable:t.includes("name")&&e.state.filterOn}})),c=[{Header:"Actions",Cell:function(e){return r.a.createElement(G.a,null,r.a.createElement(Ot,{buttonLabel:"Delete",data:e.original,table:t,color:"danger"}),r.a.createElement(Ot,{buttonLabel:"Edit",data:e.original,table:t,color:"warning"}))}}];return r.a.createElement(n.Fragment,null,r.a.createElement(G.a,{className:"mb-2"},r.a.createElement(Ot,{buttonLabel:"Add",table:t,color:"primary"}),r.a.createElement(Y.a,{onClick:function(){return e.setState({filterOn:!e.state.filterOn})}},"Filter Name")),r.a.createElement(M.a,{className:"-striped -highlight",style:{backgroundColor:"white"},data:t.data,columns:[].concat(Object(R.a)(a),c),minRows:t.data.length+1,defaultPageSize:t.data.length+1,showPagination:!1}))}}]),t}(n.Component);function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?St(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var kt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggleModal=function(){return a.setState({isModalOpen:!a.state.isModalOpen})},a.buttonOptions=function(e){return e?[{Header:"Open CCMS Case",Cell:function(e){return r.a.createElement(He,{ccms_entry:e.original,list_type:a.props.title})}},{Header:"Reassign Case",Cell:function(e){return r.a.createElement(_t,{modal:a.state.isModalOpen,form_inputs:{select_ccms_owner:""},formattedFormTitle:"Change Owner",form_title:"change_owner",toggleModal:a.toggleModal,ComponentForm:je,select_options:a.props.ccms.ccms_owner,labelKey:function(e){return"".concat(e.user.email)},size:"lg",ccms_entry:e.original})}}]:[{Header:"Update CCMS Case",Cell:function(e){return r.a.createElement(He,{ccms_entry:e.original,list_type:a.props.title})}},{Header:"Review Case",Cell:function(e){return e.original.rca_required?r.a.createElement(Ue,{ccms:e.original}):"RCA not required"}}]},a.handleSearch=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value));var t=e.target.value;a.props.search_ccms(t)},a.handlePageChange=function(e){a.setState({page:e}),a.props.set_table_page(e)},a.handlecollapseDrivers=function(){return a.setState({collapseDrivers:!a.state.collapseDrivers})},a.tableSelectionCallback=function(e){a.closeCollapse().then((function(t){return a.removeDataTable().then((function(t){return a.updateTable(e).then((function(e){return a.setState({collapseGeneralTable:!0})}))}))}))},a.handlecollapseGeneralTable=function(){return a.setState({collapseGeneralTable:!1})},a.state={collapseDrivers:!1,isModalOpen:!1,collapseGeneralTable:!1,table:null,search:e.search,page:e.page},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"closeCollapse",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({collapseGeneralTable:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeDataTable",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({table:null});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTable",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.closeCollapse().then((function(e){return a.setState({table:t})}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.table,c=t.collapseGeneralTable,l=t.collapseDrivers,s=t.search,o=this.props.ccms;return r.a.createElement(n.Fragment,null,o&&a?r.a.createElement(I.a,{isOpen:c,className:"mb-3"},r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"d-flex justify-content-start"},r.a.createElement("h5",null,a.name," Data Table")),r.a.createElement(P.a,{className:"d-flex justify-content-end"},r.a.createElement("i",{onClick:this.handlecollapseGeneralTable,style:{cursor:"pointer"},className:"fas fa-times mt-1"})))),r.a.createElement(B.a,null,r.a.createElement(N.a,null,r.a.createElement(Ct,{table:Dt({},a,{data:this.props.ccms[a.endpoint]})}))))):null,r.a.createElement(I.a,{isOpen:l,className:"mb-3"},r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"d-flex justify-content-start"},"Drivers"),r.a.createElement(P.a,{className:"d-flex justify-content-end"},r.a.createElement("i",{onClick:this.handlecollapseDrivers,style:{cursor:"pointer"},className:"fas fa-times mt-1"})))),r.a.createElement(B.a,null,r.a.createElement(pt,null)))),r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement("h2",null,this.props.title?this.props.title:"CCMS CCA VIEW - Assigning Escalation")),r.a.createElement(B.a,{style:{backgroundColor:"rgb(169,169,169,0.5)"}},r.a.createElement(x.a,{className:"mb-3"},r.a.createElement(P.a,{md:3},r.a.createElement(U.a,{autoComplete:"off"},r.a.createElement(q.a,{type:"text",name:"search",placeholder:"Search",onChange:this.handleSearch,value:this.state.search}))),this.props.title?null:r.a.createElement(P.a,{style:{textAlign:"right"}},r.a.createElement(G.a,null,r.a.createElement(ft,{dataList:[{name:"SILO",endpoint:"silo"},{name:"CCMS Status",endpoint:"ccms_status"},{name:"Site Code",endpoint:"site_code"},{name:"Accountable Team",endpoint:"accountable_team"},{name:"Ticket Type",endpoint:"ticket_type"},{name:"Escalation Type",endpoint:"escalation_type"},{name:"Business Unit",endpoint:"business_unit"}],color:"primary",selectionCallback:this.tableSelectionCallback,toggleCollapse:this.handlecollapseGeneralTable}),this.props.access_request&&0!=this.props.access_request.length?r.a.createElement(tt,{requestCount:this.props.access_request.length,color:"primary"}):null,r.a.createElement(Y.a,{onClick:this.handlecollapseDrivers,color:"primary",className:"mr-1"},r.a.createElement("span",{className:"mr-1"},r.a.createElement("i",{className:"fas fa-table"})),"Drivers"),r.a.createElement("a",{href:"https://localhost:443/control"},r.a.createElement(Y.a,{onClick:function(){return console.log("got to control page")},color:"primary",className:"mr-1"},r.a.createElement("span",{className:"mr-1"},r.a.createElement("i",{className:"fas fa-table"})),"Mailbox Monitor")),r.a.createElement(Je,{color:"primary"})))),r.a.createElement(M.a,{className:"-striped -highlight",style:{backgroundColor:"white"},data:s?this.props.filtered_ccms_list:this.props.data,columns:[].concat(Object(R.a)(K),Object(R.a)(this.buttonOptions(this.props.title))),minRows:5,defaultPageSize:10,onPageChange:function(t){return e.handlePageChange(t)},page:this.state.page}))))}}]),t}(n.Component),jt=Object(b.b)((function(e){return{business_unit:e.ccms.business_unit,comments:e.ccms.comments,filtered_ccms_list:e.ccms.filtered_ccms_list,search:e.ccms.search,page:e.ccms.page,ccms:e.ccms,access_request:e.ccms.access_request}}),{search_ccms:function(e){return function(t){t({type:"SEARCH",payload:e})}},set_table_page:function(e){return function(t){t({type:"SET_TABLE_PAGE",payload:e})}}})(kt),Tt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(e){var t={is_acknowledged:!0,acknowledged_by:a.props.auth.user.displayName,date_acknowledged:a.getCurrentDate()};a.props.ack_entry(e,t)},a.getCurrentDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1;return t<10&&(t="0"+t),a<10&&(a="0"+a),a+"/"+t+"/"+e.getFullYear()},e.get_all_data(),a.state={user_details:a.props.auth.user},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.ccms,a=e.auth;e.access_request;return t.isFetching?r.a.createElement(At,null):t.ccms_list.length&&a.user?r.a.createElement(N.a,{fluid:!0},a.user.group_list.includes("CCMS Admin")?r.a.createElement(x.a,{className:"mb-5"},r.a.createElement(P.a,null,r.a.createElement(jt,{key:1,table_name:"main",title:"",data:t.ccms_list}))):r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(jt,{key:2,table_name:"owner",title:"CCMS Owner VIEW - Assigning Escalation",data:t.ccms_list.filter((function(e){return((e.ccms_owner||{}).user||{}).email==(a.user||{}).username}))})))):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"No CCMS entries"))}}]),t}(n.Component),wt=Object(b.b)((function(e){return{ccms:e.ccms,auth:e.auth,comments:e.ccms.comments,access_request:e.ccms.access_request}}),{get_ccms_list:function(){return function(e){e({type:g}),C.a.get("/api/ccms/").then((function(t){e({type:"GET_CCMS",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},isFetching:function(){return function(e){e({type:v})}},getSurveys:function(){return function(e){e({type:g}),C.a.get("/api/surveys/").then((function(t){return e({type:"GET_SURVEYS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},ack_entry:function(e,t){return function(a){a({type:g}),C.a.put("/api/ccms/".concat(e,"/"),t).then((function(e){a({type:"ACK_ENTRY",payload:e.data})})).catch((function(e){console.log(e.response)})),a({type:v})}},get_business_unit:A,get_ticket_status:function(){return function(e){e({type:g}),C.a.get("/api/ticket_status/").then((function(t){e({type:"GET_TICKET_STATUS",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},get_escalation_type:function(){return function(e){e({type:g}),C.a.get("/api/escalation_type/").then((function(t){e({type:"GET_ESCALATION_TYPE",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},get_accountable_team:function(){return function(e){e({type:g}),C.a.get("/api/accountable_team/").then((function(t){e({type:"GET_ACCOUNTABLE_TEAM",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},get_site_code:function(){return function(e){e({type:g}),C.a.get("/api/site_code/").then((function(t){e({type:"GET_SITE_CODE",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e)}))}},get_ccms_owner:function(){return function(e){e({type:g}),C.a.get("/api/ccms_owners/").then((function(t){e({type:"GET_CCMS_OWNER",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_ccms_status:function(){return function(e){e({type:g}),C.a.get("/api/ccms_status/").then((function(t){e({type:"GET_CCMS_STATUS",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_silo:function(){return function(e){e({type:g}),C.a.get("/api/silo/").then((function(t){e({type:"GET_SILO",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_ticket_type:function(){return function(e){e({type:g}),C.a.get("/api/ticket_type/").then((function(t){e({type:"GET_TICKET_TYPE",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_ccms_admin_list:function(){return function(e){e({type:g}),C.a.get("/api/group/").then((function(t){e({type:"GET_CCMS_ADMIN_LIST",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_users_list:function(){return function(e){e({type:g}),C.a.get("/api/users/").then((function(t){e({type:"GET_USERS_LIST",payload:t.data}),e({type:v})})).catch((function(e){return console.log(e.response)}))}},get_all_data:function(){return function(e){e({type:g}),C.a.get("/api/users/").then((function(t){e({type:"GET_USERS_LIST",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/group/").then((function(t){e({type:"GET_CCMS_ADMIN_LIST",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/silo/").then((function(t){e({type:"GET_SILO",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/ticket_type/").then((function(t){e({type:"GET_TICKET_TYPE",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/ccms_status/").then((function(t){e({type:"GET_CCMS_STATUS",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/ccms_owners/").then((function(t){e({type:"GET_CCMS_OWNER",payload:t.data})})).catch((function(e){return console.log(e.response)})),C.a.get("/api/site_code/").then((function(t){e({type:"GET_SITE_CODE",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/accountable_team/").then((function(t){e({type:"GET_ACCOUNTABLE_TEAM",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/escalation_type/").then((function(t){e({type:"GET_ESCALATION_TYPE",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/ticket_status/").then((function(t){e({type:"GET_TICKET_STATUS",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/business_unit/").then((function(t){e({type:"GET_BUSINESS_UNIT",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/ccms/").then((function(t){e({type:"GET_CCMS",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/cause_code/").then((function(t){e({type:"GET_CAUSE_CODE",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/escalation_driver/").then((function(t){e({type:"GET_ESCALATION_DRIVER",payload:t.data})})).catch((function(e){return console.log(e)})),C.a.get("/api/escalation_driver_cause/").then((function(t){e({type:"GET_ESCALATION_DRIVER_CAUSE",payload:t.data})})).catch((function(e){return console.log(e)})),e({type:v})}}})(Tt),At=function(){return r.a.createElement(F.a,{style:{width:"3rem",height:"3rem",top:"50%",left:"50%",position:"fixed"}})},Nt=a(48),xt=a.n(Nt);C.a.defaults.baseURL="https://localhost:443";var Pt=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers.Authorization="Token ".concat(t)),a};C.a.defaults.baseURL="https://localhost:443";var Ft=function(e){return function(t,a){t({type:g}),C.a.put("/api/rca/".concat(e.id,"/"),e,Pt(a)).then((function(e){console.log(e.data),t({type:"UPDATE_RCA",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},Rt=function(){return function(e,t){e({type:g}),C.a.get("/api/surveys/",Pt(t)).then((function(t){return e({type:"GET_SURVEYS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},Mt=function(e){return function(t,a){t({type:g}),C.a.delete("/api/surveys/".concat(e),Pt(a)).then((function(a){t({type:"CREATE_MESSAGE",payload:{surveyDeleted:"Survey ID ".concat(e," Deleted")}}),t({type:"DELETE_SURVEY",payload:e})})).catch((function(e){return console.log(e.response.data)}))}},It=function(e){return function(t){t({type:"GET_SURVEY",payload:e})}},Lt=function(){return function(e){e({type:"REMOVE_SURVEY",payload:{}})}},zt=function(e){return function(t){C.a.get("/api/agents/".concat(e)).then((function(e){return t({type:"GET_AGENT",payload:e.data})})).catch((function(e){return console.log(e.response.data)}))}},Bt=function(){return function(e){e({type:g}),C.a.get("/api/skills/").then((function(t){return e({type:"GET_SKILLS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},Ut=function(){return function(e){e({type:g}),C.a.get("/api/dsat_code1/").then((function(t){return e({type:"GET_DSAT_CODE1",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},qt=function(){return function(e){e({type:g}),C.a.get("/api/bb_driver_code2/").then((function(t){return e({type:"GET_BB_DRIVER_CODE2",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},Gt=function(){return function(e){e({type:g}),C.a.get("/api/bb_driver_code3/").then((function(t){return e({type:"GET_BB_DRIVER_CODE3",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},Yt=function(){return function(e){e({type:g}),C.a.get("/api/team/").then((function(t){return e({type:"GET_TEAMS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},Vt=function(e){return function(t){t({type:g}),C.a.post("/api/dsat_code1/",e).then((function(e){return t({type:"ADD_DSAT_CODE1",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},Wt=function(e){return function(t){t({type:g}),C.a.post("/api/bb_driver_code2/",e).then((function(e){return t({type:"ADD_BB_DRIVER_CODE2",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},Kt=function(e){return function(t){t({type:g}),C.a.post("/api/bb_driver_code3/",e).then((function(e){return t({type:"ADD_BB_DRIVER_CODE3",payload:e.data})})).catch((function(e){return console.log(e.reponse)}))}},Ht=function(){return function(e){e({type:"MODAL_TOGGLE"})}};var Qt=function(e){return r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:e.attr},e.label_name),r.a.createElement(q.a,{key:e.attr,bsSize:e.size,type:e.type,name:e.attr,id:e.id,onChange:e.controlFunc,value:e.value,readOnly:e.readOnly,required:!0}))};var Xt=function(e){return r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:e.attr},e.label_name),r.a.createElement(q.a,{key:e.attr,bsSize:e.size,type:e.type,name:e.attr,id:e.id,onChange:e.controlFunc,value:e.value,required:!0},r.a.createElement("option",{value:""},"--select--"),e.options.map((function(t,a){return"support_silo_issue_based"==e.attr||"controllability"==e.attr||"accountable_team"==e.attr||"q1_answer"==e.attr||"contacted_customer"==e.attr||"coaching"==e.attr||e.attr,r.a.createElement("option",{key:a,value:t.name},t.name)}))))},Jt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).sendData=function(){a.props.parentCallback("x")},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.survey,t=(e.reference_number,e.owner_name,e.first_name),a=e.last_name,c=e.customer_email_address,l=e.origination_source,s=e.callback_reference_number,o=e.related_incident_record,i=e.site_location,u=e.city,m=e.state,d=e.user_location,p=e.phone_number,_=e.call_type,h=e.service_type,f=e.service,b=e.service_component,y=e.average_score,E=e.fulfillment,g=e.assignment_group,v=e.originating_ticket_description,O=e.follow_up_comments,C=e.q1,S=e.q2,D=e.q2a,k=e.q3,j=e.q3a,T=e.q4,w=e.q5,A=e.q6,N=e.budi_bu,F=e.budi_lv7,R=e.bu_catg,M=e.date_issued,I=e.uploaded_by,L=e.date_uploaded;return r.a.createElement(n.Fragment,null,r.a.createElement("h5",null,"Survey Details"),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"customer_name",label_name:"Customer Name",value:"".concat(t," ").concat(a),controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"customer_email_address",label_name:"Email Address",value:c,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"phone_number",label_name:"Phone number",value:p,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"user_location",label_name:"User Location",value:d,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"callback_reference_number",label_name:"Callback Reference Number",value:s,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"related_incident_record",label_name:"Related Incident Record",value:o,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"site_location",label_name:"Site Location",value:i,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:3},r.a.createElement(Qt,{type:"text",size:"sm",attr:"city",label_name:"City",value:u,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:3},r.a.createElement(Qt,{type:"text",size:"sm",attr:"state",label_name:"State",value:m,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"call_type",label_name:"Call Type",value:_,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_type",label_name:"Service Type",value:h,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"service",label_name:"Service",value:f,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_component",label_name:"Service Component",value:b,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"assignment_group",label_name:"Assignment Group",value:g,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"origination_source",label_name:"Source",value:l,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"originating_ticket_description",label_name:"Originating Ticket Description",value:v,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"follow_up_comments",label_name:"Follow up comments",value:O,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"average_score",label_name:"Average Score",value:y,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"fulfillment",label_name:"Fulfillment",value:E,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q1",label_name:"Q1",value:C,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q2",label_name:"Q2",value:S,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q2a",label_name:"Q2a",value:D,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q3",label_name:"Q3",value:k,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q3a",label_name:"Q3a",value:j,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q4",label_name:"Q4",value:T,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q5",label_name:"Q5",value:w,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:12},r.a.createElement(Qt,{type:"text",size:"sm",attr:"q6",label_name:"Q6",value:A,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"budi_bu",label_name:"BUDI_BU",value:N,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"budi_lv7",label_name:"BUDI_LV7",value:F,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"bu_catg",label_name:"BU_CATG",value:R,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"date_issued",label_name:"Date Issued",value:M,controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"survey-row"},r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"uploaded_by",label_name:"Uploaded by",value:I,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:6},r.a.createElement(Qt,{type:"text",size:"sm",attr:"date_uploaded",label_name:"Date uploaded",value:L,controlFunc:this.handleChange,readOnly:!0}))))}}]),t}(n.Component),Zt=Object(b.b)(null,{})(Jt);function $t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$t(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$t(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ta=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleToggle=function(){a.props.removeSurvey(),a.props.toggle()},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;delete t.selectDefault,t.surveyed_ticket=a.props.survey.reference_number,t.agent=a.props.agent.operator_lan_id,t.dsat_cause=a.props.dsat_code1.filter((function(e){return e.id==a.state.dsat_cause}))[0],t.bb_driver_code2=a.props.bb_driver_code2.filter((function(e){return e.id==a.state.bb_driver_code2}))[0],t.bb_driver_code3=a.props.bb_driver_code3.filter((function(e){return e.id==a.state.bb_driver_code3}))[0],t.completed_by=a.props.user.email;var n={agent:a.props.agent.operator_lan_id,completed:!0};console.log(t),console.log(n),a.props.addRCA(t,n),a.props.toggle()},a.handleUpdate=function(e){e.preventDefault();var t=a.state;t.surveyed_ticket=a.props.rca.surveyed_ticket,t.agent=a.props.rca.agent,t.id=a.props.rca.id,a.props.updateRca(t),a.props.toggle()},console.log(a.props.rca&&a.props.rca),a.state=ea({},a.props.rca,{selectDefault:[{type:"select",size:"sm",id:"no_data",value:"No Data"}]}),a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.rca?this.props.rca:null;this.setState(ea({},e))}},{key:"render",value:function(){var e=this,t=this.props.survey,a=t.reference_number,n=t.owner_name,c=function(e){return null!=e||e?e:""};return r.a.createElement("div",null,r.a.createElement(X.a,{scrollable:!0,className:"modal-xl modal-main",isOpen:this.props.isOpen,toggle:this.handleToggle},r.a.createElement(U.a,{className:"modal-content",onSubmit:this.props.rca.surveyed_ticket?this.handleUpdate:this.handleSubmit},r.a.createElement(J.a,{className:"modal-header",toggle:this.handleToggle},"Root Cause Analysis"),r.a.createElement(Z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Zt,{survey:this.props.survey})),r.a.createElement(P.a,null,r.a.createElement("h5",null,"RCA Details"),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,{md:4},r.a.createElement(Qt,{type:"text",size:"sm",attr:"surveyed_ticket",label_name:"Surveyed Ticket Number",value:c(a),controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:4},r.a.createElement(Qt,{type:"text",size:"sm",attr:"agent",label_name:"Agent's Name",value:c(n),controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,{md:4},r.a.createElement(Qt,{type:"text",size:"sm",attr:"skill",label_name:"Agent's Primary Skill",value:c(this.props.agent.skill),controlFunc:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,{md:4},r.a.createElement(Xt,{type:"select",size:"sm",attr:"support_silo_issue_based",label_name:"SILO based on issue",value:this.state.support_silo_issue_based,controlFunc:this.handleChange,options:this.props.skills})),r.a.createElement(P.a,{md:4},r.a.createElement(Qt,{type:"text",size:"sm",attr:"service",label_name:"Service",value:this.state.service,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,{md:4},r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_component",label_name:"Service Component",value:this.state.service_component,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"brief_description",label_name:"Brief Description",value:this.state.brief_description,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"user_verbatim",label_name:"User's verbatim",value:this.state.user_verbatim,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,{md:4},r.a.createElement(Xt,{type:"select",size:"sm",attr:"dsat_cause",label_name:"BB Driver Code 1",value:this.state.dsat_cause,controlFunc:this.handleChange,options:this.props.dsat_code1})),r.a.createElement(P.a,{md:4},r.a.createElement(Xt,{type:"select",size:"sm",attr:"bb_driver_code2",label_name:"BB Driver Code 2",value:this.state.bb_driver_code2,controlFunc:this.handleChange,options:this.state.dsat_cause?this.props.bb_driver_code2.filter((function(t){return e.state.dsat_cause==t.dsat_Code1})):this.state.selectDefault})),r.a.createElement(P.a,{md:4},r.a.createElement(Xt,{type:"select",size:"sm",attr:"bb_driver_code3",label_name:"BB Driver Code 3",value:this.state.bb_driver_code3,controlFunc:this.handleChange,options:this.state.bb_driver_code2?this.props.bb_driver_code3.filter((function(t){return e.state.bb_driver_code2==t.bb_Driver_Code2})):this.state.selectDefault}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"actual_issue",label_name:"Actual issue",value:this.state.actual_issue,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"controllability",label_name:"Controllability",value:this.state.controllability,controlFunc:this.handleChange,options:[{name:"ITSD Controllable"},{name:"Non ITSD Controllable"}]})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"accountable_team",label_name:"Accountable Team",value:this.state.accountable_team,controlFunc:this.handleChange,options:this.props.accountable_team})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"q1_answer",label_name:"Q1 Answer?",value:this.state.q1_answer,controlFunc:this.handleChange,options:[{name:"Yes"},{name:"No"}]})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"contacted_customer",label_name:"Informed user?",value:this.state.contacted_customer,controlFunc:this.handleChange,options:[{name:"Yes"},{name:"No"}]}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"summary",label_name:"Summary",value:this.state.summary,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"obs_in_call",label_name:"Place only relevant information in\r the call",value:this.state.obs_in_call,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"accountable_entity",label_name:"Accountable Entity",value:this.state.accountable_entity,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"overall_reason_dsat",label_name:"Place overall reason for DSAT",value:this.state.overall_reason_dsat,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,{form:!0},r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"coaching",label_name:"Coahing done?",value:this.state.coaching,controlFunc:this.handleChange,options:[{name:"true"},{name:"false"}]})),r.a.createElement(P.a,{md:9},r.a.createElement(Qt,{type:"text",size:"sm",attr:"corrective_actions",label_name:"Corrective actions",value:this.state.corrective_actions,controlFunc:this.handleChange,readOnly:!1})))))),r.a.createElement($.a,null,this.props.rca.surveyed_ticket?r.a.createElement(Y.a,{type:"submit",onSubmit:this.handleUpdate,className:"btn-submit"},"Update"):r.a.createElement(Y.a,{type:"submit",onSubmit:this.handleSubmit,className:"btn-submit"},"Submit"),r.a.createElement(Y.a,{type:"submit",className:"btn-submit",onClick:this.handleToggle},"Cancel")))))}}]),t}(n.Component),aa=Object(b.b)((function(e){return{isOpen:e.modal.isOpen,survey:e.surveys.survey,agent:e.surveys.agent,skills:e.surveys.skills,dsat_code1:e.surveys.dsat_code1,bb_driver_code2:e.surveys.bb_driver_code2,bb_driver_code3:e.surveys.bb_driver_code3,accountable_team:e.surveys.teams,rca:e.surveys.rca,user:e.auth.user}}),{getSurveys:Rt,deleteSurvey:Mt,toggle:Ht,getSurvey:It,getAgentDetails:zt,getSkills:Bt,getDsatCode1:Ut,getBBDriverCode2:qt,getBBDriverCode3:Gt,removeSurvey:Lt,getTeams:Yt,addRCA:function(e,t){return function(a,n){a({type:g}),C.a.post("/api/rca/",e,Pt(n)).then((function(r){a({type:"ADD_RCA",payload:r.data}),C.a.put("/api/surveys/".concat(e.surveyed_ticket,"/"),t,Pt(n)).then((function(e){console.log(e.data),a({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))})).catch((function(e){return console.log(e.response)}))}},updateRca:Ft})(ta),na=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,callback_reference_number:a.props.survey.callback_reference_number,related_incident_record:a.props.survey.related_incident_record,first_name:a.props.survey.first_name,last_name:a.props.survey.last_name,company_name:a.props.survey.company_name,phone_number:a.props.survey.phone_number,site_location:a.props.survey.site_location,customer_email_address:a.props.survey.customer_email_address,city:a.props.survey.city,state:a.props.survey.state,date_time:a.props.survey.date_time,origination_source:a.props.survey.origination_source,call_type:a.props.survey.call_type,service_type:a.props.survey.service_type,service:a.props.survey.service,service_component:a.props.survey.service_component,assignment_group:a.props.survey.assignment_group,q1:a.props.survey.q1,q2:a.props.survey.q2,q2a:a.props.survey.q2a,q3:a.props.survey.q3,q3a:a.props.survey.q3a,q4:a.props.survey.q4,q5:a.props.survey.q5,q6:a.props.survey.q6,average_score:a.props.survey.average_score,operator_lan_id:a.props.survey.operator_lan_id,owner_name:a.props.survey.owner_name,fulfillment:a.props.survey.fulfillment,follow_up_comments:a.props.survey.follow_up_comments,originating_ticket_description:a.props.survey.originating_ticket_description,budi_bu:a.props.survey.budi_bu,budi_lv7:a.props.survey.budi_lv7,bu_catg:a.props.survey.bu_catg,date_issued:a.props.survey.date_issued},a.toggle=function(){a.setState((function(e){return{modal:!e.modal}}))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;delete t.modal,t.reference_number=a.props.survey.reference_number,t.agent=a.props.survey.operator_lan_id,console.log(a.state),a.props.updateSurvey(t),a.toggle()},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleCancel=function(){a.setState((function(e){return{callback_reference_number:a.props.survey.callback_reference_number,related_incident_record:a.props.survey.related_incident_record,first_name:a.props.survey.first_name,last_name:a.props.survey.last_name,company_name:a.props.survey.company_name,phone_number:a.props.survey.phone_number,site_location:a.props.survey.site_location,customer_email_address:a.props.survey.customer_email_address,city:a.props.survey.city,state:a.props.survey.state,date_time:a.props.survey.date_time,origination_source:a.props.survey.origination_source,call_type:a.props.survey.call_type,service_type:a.props.survey.service_type,service:a.props.survey.service,service_component:a.props.survey.service_component,assignment_group:a.props.survey.assignment_group,q1:a.props.survey.q1,q2:a.props.survey.q2,q2a:a.props.survey.q2a,q3:a.props.survey.q3,q3a:a.props.survey.q3a,q4:a.props.survey.q4,q5:a.props.survey.q5,q6:a.props.survey.q6,average_score:a.props.survey.average_score,operator_lan_id:a.props.survey.operator_lan_id,owner_name:a.props.survey.owner_name,fulfillment:a.props.survey.fulfillment,follow_up_comments:a.props.survey.follow_up_comments,originating_ticket_description:a.props.survey.originating_ticket_description,budi_bu:a.props.survey.budi_bu,budi_lv7:a.props.survey.budi_lv7,bu_catg:a.props.survey.bu_catg,date_issued:a.props.survey.date_issued}})),a.toggle()},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this.props.survey.reference_number;return r.a.createElement("div",null,r.a.createElement(Y.a,{color:"primary",size:"sm",onClick:this.toggle},"View"),r.a.createElement(X.a,{scrollable:!0,className:"modal-xl modal-main",isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(U.a,{className:"modal-content"},r.a.createElement(J.a,{className:"modal-header",toggle:this.handleCancel},t),r.a.createElement(Z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"first_name",label_name:"First Name",value:this.state.first_name,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"first_name",label_name:"Last Name",value:this.state.last_name,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"customer_email_address",label_name:"Customer Email Address",value:this.state.customer_email_address,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"company_name",label_name:"Company Name",value:this.state.company_name,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,(e={type:"text",size:"sm",attr:"phone_number",label_name:"Phone Number"},Object(E.a)(e,"attr","phone_number"),Object(E.a)(e,"value",this.state.phone_number),Object(E.a)(e,"controlFunc",this.handleChange),Object(E.a)(e,"readOnly",!1),e))),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"site_location",label_name:"Site Location",value:this.state.site_location,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"city",label_name:"City",value:this.state.city,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"state",label_name:"State",value:this.state.state,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"callback_reference_number",label_name:"Callback Reference Number",value:this.state.callback_reference_number,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"relared_incident_record",label_name:"Related Incident Record",value:this.state.relared_incident_record,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"vip",label_name:"VIP",value:this.state.vip,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"date_time",label_name:"Date Time",value:this.state.date_time,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"origination_source",label_name:"Origination Source",value:this.state.origination_source,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"call_type",label_name:"Call Type",value:this.state.call_type,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_type",label_name:"Service Type",value:this.state.service_type,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"service",label_name:"Service",value:this.state.service,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_component",label_name:"Service Component",value:this.state.service_component,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"assignment_group",label_name:"Assignment Group",value:this.state.assignment_group,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q1",label_name:"Q1",value:this.state.q1,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q2",label_name:"Q2",value:this.state.q2,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q2a",label_name:"Q2a",value:this.state.q2a,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q3",label_name:"Q3",value:this.state.q3,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q3a",label_name:"Q3a",value:this.state.q3a,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q4",label_name:"Q4",value:this.state.q4,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q5",label_name:"Q5",value:this.state.q5,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"q6",label_name:"Q6",value:this.state.q6,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"average_score",label_name:"Average Score",value:this.state.average_score,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"owner_name",label_name:"Owner Name",value:this.state.owner_name,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"operator_lan_id",label_name:"Operator Lan ID",value:this.state.operator_lan_id,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"fulfillment",label_name:"Fulfillment",value:this.state.fulfillment,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"follow_up_comments",label_name:"Follow Up Comments",value:this.state.follow_up_comments,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"originating_ticket_description",label_name:"Originating Ticket Description",value:this.state.originating_ticket_description,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"budi_bu",label_name:"Budi_Bu",value:this.state.budi_bu,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"budi_lv7",label_name:"Budi_lv7",value:this.state.budi_lv7,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"bu_catg",label_name:"Bu_catg",value:this.state.bu_catg,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"date_issued",label_name:"Date Issued",value:this.state.date_issued,controlFunc:this.handleChange,readOnly:!1})))),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",onClick:this.handleSubmit},"Update")," ",r.a.createElement(Y.a,{color:"secondary",onClick:this.handleCancel},"Cancel")))))}}]),t}(r.a.Component),ra=Object(b.b)(null,{updateSurvey:function(e){return function(t,a){t({type:g}),C.a.put("/api/surveys/".concat(e.reference_number,"/"),e,Pt(a)).then((function(e){console.log(e.data),t({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(na),ca=a(105),la=a.n(ca),sa=a(257),oa=a.n(sa),ia=(a(552),la.a.ExcelFile),ua=la.a.ExcelFile.ExcelSheet,ma=la.a.ExcelFile.ExcelColumn,da=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={cellprops:null,filtered:[],start_date:"",end_date:"",data:[],filter:!1,sortedData:[],rca_headers:[],agent:[]},a.getData=function(e){"bottombox"===e?a.props.getBottomboxSurveyView():"topbox"===e?a.props.getTopboxSurveyView():"completed"===e?a.props.getCompletedSurveyView():"all"===e&&a.props.getAllSurveyView()},a.handleDelete=function(e){return a.props.deleteSurvey(e)},a.handleToggle=function(e){1==e.completed?a.props.getRca(e):a.props.removeRca(),a.props.getSurvey(e),a.props.getAgentDetails(e.operator_lan_id),a.props.toggle()},a.handleClick=function(){var e=a.reactTable.getResolvedState().sortedData;a.setState({sortedData:e})},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,xt()(e.target.value).format("DD/MM/YYYY")))},a.handleEvent=function(e,t){console.log(xt()(t.startDate).format("DD/MM/YYYY"))},a.filterToggle=function(){a.setState((function(e,t){return{filter:!e.filter}}))},a.resetFields=function(){a.setState({filtered:[],sortedData:[]})},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.agents,n=t.rcas;n!=e.rcas&&this.setState({rca_headers:n[0]&&Object.keys(n[0]),rcas:n}),a!=e.agents&&this.setState({agents:a})}},{key:"render",value:function(){var e,t,a=this,c=this.props.headers.map((function(e){var t,a,n;switch(e){case"date_issued":return Object.assign((t={},Object(E.a)(t,"Header",e),Object(E.a)(t,"accessor",e),Object(E.a)(t,"Filter",(function(e){e.filter;var t=e.onChange;return r.a.createElement(oa.a,{onApply:function(e,a){return t(a)}},r.a.createElement(Y.a,{className:"btn-filter",size:"sm"},"Filter Date"))})),Object(E.a)(t,"filterMethod",(function(e,t){e?console.log(e):console.log("no filter");var a=t.date_issued,n=xt()(e.value.startDate).format("YYYY-MM-DD"),r=xt()(e.value.endDate).format("YYYY-MM-DD");if(xt()(a).isBetween(n,r,null,[]))return!0})),t));case"completed":return Object.assign((a={},Object(E.a)(a,"Header",e),Object(E.a)(a,"id",e),Object(E.a)(a,"accessor",(function(e){return e.completed.toString()})),a));default:return Object.assign((n={},Object(E.a)(n,"Header",e),Object(E.a)(n,"accessor",e),n))}})),l=[{Header:"Actions",filterable:!1,Cell:function(e){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(ra,{survey:e.original}),r.a.createElement(Y.a,{color:1==a.props.surveys.filter((function(t){return e.original.reference_number===t.reference_number})).map((function(e){return e.completed}))[0]?"success":1==e.original.bottombox?"danger":"warning",size:"sm",className:"ml-1",onClick:function(){return a.handleToggle(e.original)}},"RCA"),r.a.createElement(aa,null),r.a.createElement(Y.a,{className:"ml-1",color:"danger",size:"sm",onClick:function(){return a.handleDelete(e.original.reference_number)}},"Delete")))},width:200}].concat(Object(R.a)(c)),s=r.a.createElement(ua,{data:this.state.sortedData[0]?this.state.sortedData:this.props.surveys,name:"Surveys"},this.props.headers.map((function(e){return r.a.createElement(ma,{key:e,label:e,value:e})})));return Array.isArray(this.props.rcas)&&this.props.rcas.length?(e=Object.keys(this.props.rcas[0]),t=r.a.createElement(ua,{data:this.props.rcas,name:"RCAS"},e.map((function(e){return r.a.createElement(ma,{key:e,label:e,value:e})})))):t=r.a.createElement(ua,{data:[{data:"no_data"}],name:"RCAS"},r.a.createElement(ma,{label:"data",value:"data"})),r.a.createElement(n.Fragment,null,r.a.createElement("h5",null,"Survey Table"),r.a.createElement(x.a,{className:"mb-3 mt-2"},r.a.createElement(P.a,{style:{display:"inline"}},r.a.createElement(Y.a,{size:"sm",color:"success",onClick:function(){return a.getData("completed")},className:"mr-2"},"Completed RCA"," ",r.a.createElement(Ze.a,{color:"secondary"},this.props.completed_survey_count)),r.a.createElement(Y.a,{size:"sm",color:"warning",className:"mr-2",onClick:function(){return a.getData("topbox")}},"Topbox - RCA not done"," ",r.a.createElement(Ze.a,{color:"secondary"},this.props.incomplete_topbox_count)),r.a.createElement(Y.a,{size:"sm",color:"danger",className:"mr-2",onClick:function(){return a.getData("bottombox")}},"Bottombox - RCA not done"," ",r.a.createElement(Ze.a,{color:"secondary"},this.props.incomplete_bottombox_count)),r.a.createElement(Y.a,{size:"sm",color:"primary",className:"mr-2",onClick:function(){return a.getData("all")}},"All"," ",r.a.createElement(Ze.a,{color:"secondary"},this.props.data.length)),r.a.createElement("span",null,"Legend for RCA button"))),r.a.createElement(x.a,{className:"mb-2"},r.a.createElement(P.a,{md:6,style:{display:"inline"}},r.a.createElement(n.Fragment,null,r.a.createElement(ia,{filename:"Bottombox",element:r.a.createElement(Y.a,{className:"mr-2 btn-bb",onClick:this.handleClick},"Download")},s,t,0!=this.props.agents.length?r.a.createElement(ua,{data:this.props.agents,name:"Agents"},this.props.agent_headers.map((function(e){return"surveys"!=e?r.a.createElement(ma,{key:e,label:e,value:e}):r.a.createElement(ma,{key:e,label:e,value:"test"})}))):console.log("Do Nothing Agent"))),r.a.createElement(Y.a,{className:"mr-2 btn-bb",onClick:this.filterToggle},"Filter"),r.a.createElement(Y.a,{className:"mr-2 btn-bb",onClick:this.resetFields},"Reset"))),r.a.createElement(M.a,{className:"-striped -highlight",ref:function(e){return a.reactTable=e},filtered:this.state.filtered,onFilteredChange:function(e){a.setState({filtered:e,sortedData:a.reactTable.getResolvedState().sortedData})},style:{backgroundColor:"white"},data:this.props.surveys_view,columns:l,minRows:10,defaultPageSize:10,filterable:this.state.filter}))}}]),t}(n.Component),pa=Object(b.b)((function(e){return{headers:e.surveys.headers,data:e.surveys.surveys,surveys_view:e.surveys.surveys_view,isOpen:e.modal.isOpen,surveys:e.surveys.surveys,agents:e.surveys.agents,agent_headers:e.surveys.agent_headers,rcas:e.surveys.rcas,rca:e.surveys.rca,incomplete_bottombox_count:e.surveys.surveys.filter((function(e){return 1===e.bottombox&&!1===e.completed})).length,incomplete_topbox_count:e.surveys.surveys.filter((function(e){return 0===e.bottombox&&!1===e.completed})).length,completed_survey_count:e.surveys.surveys.filter((function(e){return!0===e.completed})).length}}),{deleteSurvey:Mt,toggle:Ht,getSurvey:It,getAgentDetails:zt,getRca:function(e){return function(t){t({type:"GET_RCA",payload:e.reference_number})}},removeRca:function(){return function(e){e({type:"REMOVE_RCA"})}},getBottomboxSurveyView:function(){return function(e){e({type:"GET_BOTTOMBOX_SURVEY_VIEW"})}},getTopboxSurveyView:function(){return function(e){e({type:"GET_TOPBOX_SURVEY_VIEW"})}},getCompletedSurveyView:function(){return function(e){e({type:"GET_COMPLETED_SURVEY_VIEW"})}},getAllSurveyView:function(){return function(e){e({type:"GET_ALL_SURVEY_VIEW"})}}})(da);function _a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ha=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,surveyed_ticket:"",agent:"",support_silo_issue_based:"",service:"",service_component:"",brief_description:"",user_verbatim:"",dsat_cause:"test",bb_driver_code2:"",bb_driver_code3:"",actual_issue:"",controllability:"",accountable_team:"",q1_answer:"",contacted_customer:"",summary:"",obs_in_call:"",accountable_entity:"",overall_reason_dsat:"",coaching:"",corrective_actions:""},a.handleSubmit=function(e){e.preventDefault();var t=a.state;t.id=a.props.local_rca.id,delete t.modal,console.log(t),a.props.updateRca(t),a.toggle()},a.toggle=function(){a.setState((function(e){return{modal:!e.modal}}))},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleCancel=function(){a.toggle()},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_a(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_a(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.local_rca))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y.a,{color:"primary",size:"sm",onClick:this.toggle},"View"),r.a.createElement(X.a,{scrollable:!0,className:"modal-xl modal-main",isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(U.a,{className:"modal-content"},r.a.createElement(J.a,{className:"modal-header",toggle:this.handleCancel},this.state.surveyed_ticket," - Root Cause Analysis"),r.a.createElement(Z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"agent",label_name:"Agent",value:this.state.agent,controlFunc:this.handleChange,readOnly:!0})),r.a.createElement(P.a,null,r.a.createElement(Xt,{type:"select",size:"sm",attr:"support_silo_issue_based",label_name:"SILO based on issue",value:this.state.support_silo_issue_based,controlFunc:this.handleChange,options:this.props.skills})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"service",label_name:"Service",value:this.state.service,controlFunc:this.handleChange,readOnly:!1})),r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"service_component",label_name:"Service Component",value:this.state.service_component,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"brief_description",label_name:"Brief Description",value:this.state.brief_description,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"user_verbatim",label_name:"User's verbatim",value:this.state.user_verbatim,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,{md:4},r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"dsat_cause"},"What caused DSAT?"),r.a.createElement(q.a,{key:"dsat_cause",bsSize:"sm",type:"select",name:"dsat_cause",id:"dsat_cause",onChange:this.handleChange,value:this.state.dsat_cause,required:!0},r.a.createElement("option",{value:""},"--select--"),this.props.dsat_code1.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),r.a.createElement(P.a,{md:4},r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"bb_driver_code2"},'"BB Driver Code 2"'),r.a.createElement(q.a,{key:"bb_driver_code2",bsSize:"sm",type:"select",name:"bb_driver_code2",id:"bb_driver_code2",onChange:this.handleChange,value:this.state.bb_driver_code2,required:!0},r.a.createElement("option",{value:""},"--select--"),this.props.bb_driver_code2.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),r.a.createElement(P.a,{md:4},r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"bb_driver_code3"},'"BB Driver Code 3"'),r.a.createElement(q.a,{key:"bb_driver_code3",bsSize:"sm",type:"select",name:"bb_driver_code3",id:"bb_driver_code3",onChange:this.handleChange,value:this.state.bb_driver_code2,required:!0},r.a.createElement("option",{value:""},"--select--"),this.props.bb_driver_code3.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)})))))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"actual_issue",label_name:"Actual issue",value:this.state.actual_issue,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"controllability",label_name:"Controllability",value:this.state.controllability,controlFunc:this.handleChange,options:[{name:"ITSD Controllable"},{name:"Non ITSD Controllable"}]})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"accountable_team",label_name:"Accountable Team",value:this.state.accountable_team,controlFunc:this.handleChange,options:this.props.accountable_team})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"q1_answer",label_name:"Q1 Answer?",value:this.state.q1_answer,controlFunc:this.handleChange,options:[{name:"Yes"},{name:"No"}]})),r.a.createElement(P.a,{md:3},r.a.createElement(Xt,{type:"select",size:"sm",attr:"contacted_customer",label_name:"Informed user?",value:this.state.contacted_customer,controlFunc:this.handleChange,options:[{name:"Yes"},{name:"No"}]}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"summary",label_name:"Summary",value:this.state.summary,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"obs_in_call",label_name:"Place only relevant information in\r the call",value:this.state.obs_in_call,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"accountable_entity",label_name:"Accountable Entity",value:this.state.accountable_entity,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Qt,{type:"text",size:"sm",attr:"overall_reason_dsat",label_name:"Place overall reason for DSAT",value:this.state.overall_reason_dsat,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,{md:2},r.a.createElement(Xt,{type:"select",size:"sm",attr:"coaching",label_name:"Coahing done?",value:this.state.coaching,controlFunc:this.handleChange,options:[{name:"true"},{name:"false"}]})),r.a.createElement(P.a,{md:10},r.a.createElement(Qt,{type:"text",size:"sm",attr:"corrective_actions",label_name:"Corrective actions",value:this.state.corrective_actions,controlFunc:this.handleChange,readOnly:!1})))),r.a.createElement($.a,null,r.a.createElement(Y.a,{color:"primary",onClick:this.handleSubmit},"Update")," ",r.a.createElement(Y.a,{color:"secondary",onClick:this.handleCancel},"Cancel")))))}}]),t}(n.Component),fa=Object(b.b)((function(e){return{agent:e.surveys.agent,survey:e.surveys.survey,skills:e.surveys.skills,dsat_code1:e.surveys.dsat_code1,bb_driver_code2:e.surveys.bb_driver_code2,bb_driver_code3:e.surveys.bb_driver_code3,accountable_team:e.surveys.teams}}),{updateRca:Ft})(ha);function ba(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ya=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={filter:!1,filtered:[],sortedData:[]},a.filterToggle=function(){a.setState((function(e,t){return{filter:!e.filter}}))},a.handleDelete=function(e){a.props.deleteRca(e)},a.handleClick=function(e){a.props.getSurvey(e)},a.resetFields=function(){a.setState({filtered:[],sortedData:[]})},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;if(Array.isArray(this.props.rcas)&&this.props.rcas.length){var t=this.props.rcas.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ba(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ba(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{dsat_cause:e.dsat_cause.name,bb_driver_code2:e.bb_driver_code2.name,bb_driver_code3:e.bb_driver_code3.name})})),a=Object.keys(this.props.rcas[0]).map((function(e){var t;return Object.assign((t={},Object(E.a)(t,"Header",e),Object(E.a)(t,"accessor",e),t))})),c=[{Header:"Actions",filterable:!1,Cell:function(t){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(fa,{local_rca:t.original})),r.a.createElement(Y.a,{className:"ml-1",color:"danger",size:"sm",onClick:function(){return e.handleDelete(t.original)}},"Delete"))},width:200}].concat(Object(R.a)(a));return r.a.createElement(n.Fragment,null,r.a.createElement("h5",null,"RCA Table"),r.a.createElement(Y.a,{className:"mr-2 mb-2 btn-bb",onClick:this.filterToggle},"Filter"),r.a.createElement(Y.a,{className:"mr-2 mb-2 btn-bb",onClick:this.resetFields},"Reset"),r.a.createElement(M.a,{className:"-striped -highlight",data:t,columns:c,minRows:5,defaultPageSize:5,filterable:this.state.filter,style:{backgroundColor:"white"}}))}return r.a.createElement(n.Fragment,null)}}]),t}(n.Component),Ea=Object(b.b)((function(e){return{rcas:e.surveys.rcas}}),{getSurvey:It,deleteRca:function(e){return function(t,a){t({type:g}),C.a.delete("/api/rca/".concat(e.id),Pt(a)).then((function(n){t({type:"DELETE_RCA",payload:e}),C.a.put("/api/surveys/".concat(e.surveyed_ticket,"/"),{agent:e.agent,completed:!1},Pt(a)).then((function(e){return t({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))})).catch((function(e){return console.log(e.response.data)}))}},getAgentDetails:zt})(ya),ga=a(593),va=a(594),Oa=a(592),Ca=a(103),Sa=a.n(Ca),Da=a(258),ka=["reference_number","callback_reference_number","related_incident_record","company_name","phone_number","site_location","city","state","user_location","first_name","last_name","VIP","customer_email_address","date_time","origination_source","call_type","service_type","service","service_component","assignment_group","q1","q2","q2a","q3","q3a","q4","q5","q6","average_score","owner_name","operator_lan_id","fulfillment","follow_up_comments","originating_ticket_description","budi_bu","budi_lv7","bu_catg","date_issued","bottombox","completed","uploaded_by","date_uploaded"];function ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ta=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={file:{},data:[],isStaged:!1,keys:ka.filter((function(e){return"uploaded_by"!=e&&"date_uploaded"!=e&&"completed"!=e})),modal:!1},a.handleChange=function(e){var t=e.target.files;t&&t[0]&&a.setState({file:t[0]});var n=new FileReader,r=!!n.readAsBinaryString;n.onload=function(e){var t=e.target.result,n=Sa.a.read(t,{type:r?"binary":"array",bookVBA:!0,sheetStubs:!0}),c=n.SheetNames[0],l=n.Sheets[c],s=Sa.a.utils.sheet_to_json(l,{defval:"",header:a.state.keys,range:1}).filter((function(e){return!a.props.surveys.map((function(e){return e.reference_number})).includes(e.reference_number)}));a.setState({data:s.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ja(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ja(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{uploaded_by:a.props.user.email})})),isStaged:!a.state.isStaged},(function(){console.log(JSON.stringify(a.state.data,null,2))}))},r?n.readAsBinaryString(t[0]):n.readAsArrayBuffer(t[0])},a.handleFile=function(e){e.preventDefault(),a.props.addSurveysBulk(a.state.data),a.toggle()},a.handleCancel=function(){a.setState((function(e,t){return e.isStaged&&{isStaged:!e.isStaged}})),a.toggle()},a.toggle=function(){a.setState((function(e,t){return{modal:!e.modal}}))},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.headers.map((function(e){var t;return Object.assign((t={},Object(E.a)(t,"Header",e),Object(E.a)(t,"accessor",e),t))})),t=Object(R.a)(e);return r.a.createElement(n.Fragment,null,r.a.createElement(Oa.a,{style:{textAlign:"center",color:"white"},className:"sidebar-navlink",onClick:this.toggle},r.a.createElement("i",{className:"fa fa-upload fa-2x"}),r.a.createElement("p",{style:{fontSize:"12px"}},"Upload Data")),r.a.createElement(X.a,{scrollable:!0,className:"modal-lg modal-main",isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(U.a,{className:"modal-content"},r.a.createElement(J.a,{toggle:this.toggle,className:"modal-header"},"Upload Surveys"),r.a.createElement(Z.a,null,r.a.createElement(q.a,{type:"file",name:"selectedFile",className:"form-control-file",id:"file",accept:Da.SheetJSFT,onChange:this.handleChange}),this.state.isStaged&&r.a.createElement(M.a,{className:"-striped -highlight",data:this.state.data,columns:t,minRows:10,defaultPageSize:10})),r.a.createElement($.a,null,r.a.createElement(Y.a,{className:"btn-submit",onClick:this.handleFile},"Send")," ",r.a.createElement(Y.a,{className:"btn-submit",onClick:this.handleCancel},"Cancel")))))}}]),t}(n.Component),wa=Object(b.b)((function(e){return{headers:e.surveys.headers,user:e.auth.user,surveys:e.surveys.surveys}}),{addSurveysBulk:function(e){return function(t,a){t({type:g});var n=e.map((function(e){C.a.post("/api/surveys/",e,Pt(a)).then((function(e){t({type:"ADD_SURVEY",payload:e.data}),t({type:"GET_BOTTOMBOX",payload:e.data})})).catch((function(e){var a;console.log(e.response),e.response&&(a={msg:e.response.data,status:e.response.status},t({type:"GET_ERRORS",payload:a}),t({type:"ADD_FAILED_SURVEY",payload:{data:e.config.data,msg:e.response.data,status:e.response.status}}))}))}));Promise.all(n),t({type:v})}},toggle:Ht,getSurveys:Rt})(Ta),Aa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).table=function(e){return r.a.createElement(ye.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name))}))))},a.state={table:e.table},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.table(this.props.table))}}]),t}(n.Component),Na=Object(b.b)((function(e){return{teamleads:e.surveys.teamleads,skills:e.surveys.skills}}),{})(Aa),xa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,name:""},a.toggle=function(){a.setState((function(e,t){return{modal:!1,name:""}})),a.props.onModalChange(!1)},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={name:a.state.name};switch(console.log(e.target.name.id),e.target.name.id){case"addSkill":a.props.addSkill(t);break;case"addTeamLead":a.props.addTeamLead(t);break;case"addDsatCode1":a.props.addDsatCode1(t);break;case"addBbDriverCode2":a.props.addBbDriverCode2(t);break;case"addBbDriverCode3":a.props.addBbDriverCode3(t);break;case"addTeam":a.props.addTeam(t);break;default:return console.log("not added")}a.toggle()},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState((function(t,a){return{modal:e.modal}}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(X.a,{scrollable:!0,className:"modal-md modal-main",isOpen:this.state.modal,toggle:this.toggle},r.a.createElement(U.a,{className:"modal-content",onSubmit:this.handleSubmit},r.a.createElement(J.a,{toggle:this.toggle,className:"modal-header"},this.props.label_name),r.a.createElement(Z.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{className:"mx-auto"},r.a.createElement(Qt,{type:"text",size:"md",attr:"name",id:this.props.data_name,label_name:"Name",value:this.state.name,controlFunc:this.handleChange,readOnly:!1}))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Na,{table:"addSkill"==this.props.data_name&&this.props.skills||"addTeamLead"==this.props.data_name&&this.props.teamleads||"addTeam"==this.props.data_name&&this.props.teams})))),r.a.createElement($.a,null,r.a.createElement(Y.a,{type:"submit",onSubmit:this.handleSubmit,className:"btn-submit"},"Submit")," ",r.a.createElement(Y.a,{type:"button",className:"btn-submit",onClick:this.toggle},"Cancel")))))}}]),t}(n.Component),Pa=Object(b.b)((function(e){return{teamleads:e.surveys.teamleads,teams:e.surveys.teams,skills:e.surveys.skills}}),{addTeam:function(e){return function(t){t({type:g}),C.a.post("/api/team/",e).then((function(e){return t({type:"ADD_TEAM",payload:e.data})})).catch((function(e){return console.log(e)}))}},addSkill:function(e){return function(t){t({type:g}),C.a.post("/api/skills/",e).then((function(e){return t({type:"ADD_SKILL",payload:e.data})})).catch((function(e){return console.log(e)}))}},addTeamLead:function(e){return function(t){t({type:g}),C.a.post("/api/teamleads/",e).then((function(e){return t({type:"ADD_TEAMLEAD",payload:e.data})})).catch((function(e){return console.log(e)}))}},addDsatCode1:Vt,addBbDriverCode2:Wt,addBbDriverCode3:Kt})(xa),Fa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,table:{}},a.handleClick=function(e){a.setState((function(t,a){return{modal:!t.modal,table:e}}))},a.handleModalState=function(e){a.setState({modal:e})},a.handleCollapse=function(e){"agent_view"===e?a.props.agentViewCollapse():"bottombox_driver_view"===e?a.props.bottomboxDriverViewCollapse():"survey_view"===e?a.props.surveyViewCollapse():"dashboard"===e&&a.props.dashboardViewCollapse()},a.checkActive=function(){var e=a.props,t=e.agent_view_collapse,n=e.bottombox_view_collapse,r=e.survey_view_collapse;return!0===t?{fontWeight:"bold",color:"white"}:!0===n?{fontWeight:"bold",color:"white"}:!0===r?{fontWeight:"bold",color:"white"}:void 0},a.style={textAlign:"center",color:"white"},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ga.a,{vertical:!0},r.a.createElement(va.a,{style:{backgroundColor:"black",color:"white",paddingTop:"10px",paddingLeft:"14px"}}),r.a.createElement(va.a,{className:"sidebar-navitem"},r.a.createElement(Oa.a,{className:"sidebar-navlink",onClick:function(){return e.handleCollapse("dashboard")},style:this.style},r.a.createElement("i",{style:{color:this.props.dashboard_view_collapse?"#ffed00":"white"},className:"fa fa-chart-area fa-2x"})," ",r.a.createElement("p",{style:{fontSize:"12px"}},"Dashboard")),r.a.createElement(Oa.a,{className:"sidebar-navlink",onClick:function(){return e.handleCollapse("survey_view")},style:this.style},r.a.createElement("i",{style:{color:this.props.survey_view_collapse?"#ffed00":"white"},className:"fa fa-table fa-2x"})," ",r.a.createElement("p",{style:{fontSize:"12px"}},"Survey View")),r.a.createElement(Oa.a,{className:"sidebar-navlink",onClick:function(){return e.handleCollapse("agent_view")},style:this.style},r.a.createElement("i",{style:{color:this.props.agent_view_collapse?"#ffed00":"white"},className:"fa fa-users fa-2x"}),r.a.createElement("p",{style:{fontSize:"12px"}},"Agent View")),r.a.createElement(Oa.a,{className:"sidebar-navlink",onClick:function(){return e.handleCollapse("bottombox_driver_view")},style:this.style},r.a.createElement("i",{style:{color:this.props.bottombox_view_collapse?"#ffed00":"white"},className:"fa fa-list-ol fa-2x"}),r.a.createElement("p",{style:{fontSize:"12px"}},"Drivers View")),r.a.createElement(wa,null),[{label_name:"Add Agent Skill",data_name:"addSkill"},{label_name:"Add Team Lead",data_name:"addTeamLead"},{label_name:"Add Team",data_name:"addTeam"}].map((function(t){return r.a.createElement(n.Fragment,{key:t.data_name},r.a.createElement(Oa.a,{className:"sidebar-navlink",style:e.style,onClick:function(){return e.handleClick(t)}},r.a.createElement("i",{className:"fa fa-plus fa-2x"}),r.a.createElement("p",{style:{fontSize:"12px"}},t.label_name)),r.a.createElement(Pa,{data_name:e.state.table.data_name,label_name:e.state.table.label_name,modal:e.state.modal,onModalChange:e.handleModalState}))}))))}}]),t}(n.Component),Ra=Object(b.b)((function(e){return{agent_view_collapse:e.surveys.agent_view_collapse,bottombox_view_collapse:e.surveys.bottombox_view_collapse,survey_view_collapse:e.surveys.survey_view_collapse,dashboard_view_collapse:e.surveys.dashboard_view_collapse}}),{agentViewCollapse:function(){return function(e){e({type:"COLLAPSE_AGENT_VIEW"})}},bottomboxDriverViewCollapse:function(){return function(e){e({type:"COLLAPSE_BOTTOMBOX_DRIVER_VIEW"})}},surveyViewCollapse:function(){return function(e){e({type:"COLLAPSE_SURVEY_VIEW"})}},dashboardViewCollapse:function(){return function(e){e({type:"COLLAPSE_DASHBOARD_VIEW"})}}})(Fa),Ma=a(28),Ia=(a(556),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},monthSelection:[],weekSelection:[],selectedMonth:a.props.selectedMonth,selectedWeek:a.props.selectedWeek,selectedYear:"",curr_year:"",curr_month:"",curr_month_string:"",days_per_week:[],selectedMonth_chart_data:[]},a.get_data=function(e,t){var a=new Date,n=t||a.getFullYear(),r=a.getMonth()+1,c=t?[1,2,3,4,5,6,7,8,9,10,12]:Array.from(new Array(r),(function(e,t){return t+1}));return console.log(c),c.map((function(t){var a=e.filter((function(e){return new Date(e.date_issued).getMonth()+1==t&&new Date(e.date_issued).getFullYear()==n})),r=(0,new Intl.DateTimeFormat("en-US",{month:"short"}).format)(new Date("".concat(n,"-").concat(t,"-01")));return Object(E.a)({},r,a)}))},a.get_data_by_month=function(e,t){var n=a.state.selectedYear?a.state.selectedYear:(new Date).getFullYear(),r=a.getWeeksInMonth(t);a.setState({days_per_week:r});var c=[];return r.forEach((function(a,r){var l=e.filter((function(e){var r=new Date(e.date_issued);return r>=new Date("".concat(n,"-").concat(t,"-").concat(a.start))&&r<=new Date("".concat(n,"-").concat(t,"-").concat(a.end))})),s="Week ".concat(r+1);return c.push(Object(E.a)({},s,l))})),c},a.getWeeksInMonth=function(e,t){for(var a=t||(new Date).getFullYear(),n=[],r=new Date(a,e-1,1),c=new Date(a,e,0).getDate(),l=r.getDay(),s="",o="",i=1;i<c+1;i++)0!==l&&1!==i||(s=i),6!==l&&i!==c||s!=(o=i)&&n.push({start:s,end:o}),l=new Date(a,e-1,i).getDay();return n},a.options={responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}},a.handleChange=function(e){if(a.setState(Object(E.a)({},e.target.name,e.target.value)),"selectedYear"===e.target.name){var t=a.get_data(a.props.filtered_list,e.target.value),n=new Date,r=n.getFullYear(),c=n.getMonth()+1,l=(e.target.value==(new Date).getFullYear()?Array.from(new Array(c),(function(e,t){return t+1})):[1,2,3,4,5,6,7,8,9,10,11,12]).map((function(e){return{string:(0,new Intl.DateTimeFormat("en-US",{month:"short"}).format)(new Date("".concat(r,"-").concat(e,"-01"))),int:e}}));a.setState({monthSelection:l}),a.props.agent_chart_data&&a.props.updateAgentChartData(t),a.props.updateChartData(t);a.props.updatedSelectedMonth(""),a.props.updatedSelectedYear(e.target.value)}if("selectedMonth"===e.target.name){a.props.updatedSelectedMonth(e.target.value);var s=a.get_data_by_month(a.props.filtered_list,e.target.value);a.props.agent_chart_data&&a.props.updateAgentChartData(s),a.props.updateChartData(s),a.setState({weekSelection:s.map((function(e){return Object.keys(e)})),selectedMonth_chart_data:s});a.props.updatedSelectedWeek(""),"reset"===e.target.value&&(a.props.agent_chart_data&&a.props.updateAgentChartData(a.get_data(a.props.filtered_list)),a.props.updateChartData(a.get_data(a.props.filtered_list)))}if("selectedWeek"===e.target.name)if("reset"===e.target.value){a.props.updatedSelectedWeek(""),a.props.agent_chart_data&&a.props.updateAgentChartData(a.get_data_by_month(a.props.filtered_list,a.props.selectedMonth)),a.props.updateChartData(a.get_data_by_month(a.props.filtered_list,a.props.selectedMonth))}else{a.props.updatedSelectedWeek(e.target.value);for(var o=a.state,i=o.selectedMonth,u=o.selectedYear,m=e.target.options.selectedIndex,d=a.state.selectedMonth_chart_data[m-1],p=a.state.days_per_week[m-1],_=[],h=u||(new Date).getFullYear(),f=p.start;f<=p.end;f++){var b=xt()("".concat(h,",").concat(i,",").concat(f)).format("YYYY-MM-DD");_.push(b)}var y=Object.values(d)[0],g=_.map((function(e){var t=y.filter((function(t){return t.date_issued===e}));return Object(E.a)({},e,t)}));a.props.agent_chart_data&&a.props.updateAgentChartData(g),a.props.updateChartData(g)}},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=Array.from(new Array(a),(function(e,t){return t+1})).map((function(e){return{string:(0,new Intl.DateTimeFormat("en-US",{month:"short"}).format)(new Date("".concat(t,"-").concat(e,"-01"))),int:e}}));this.setState({monthSelection:n,curr_year:t,curr_month:a})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{className:"mx-1"},r.a.createElement(P.a,null,r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"selectedYear"},"Select Year"),r.a.createElement(q.a,{type:"select",id:"selectedYear",name:"selectedYear",value:this.state.selectedYear||"",onChange:this.handleChange},this.props.yearSelection.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))),r.a.createElement(P.a,null,r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"selectedMonth"},"Select Month"),r.a.createElement(q.a,{type:"select",id:"selectedMonth",name:"selectedMonth",value:this.props.selectedMonth,onChange:this.handleChange},r.a.createElement("option",{value:"reset"},"----"),this.state.monthSelection.map((function(e){return r.a.createElement("option",{key:e.int,value:e.int},e.string)}))))),this.props.selectedMonth&&"reset"!=this.props.selectedMonth&&r.a.createElement(P.a,null,r.a.createElement(ae.a,null,r.a.createElement(pe.a,{size:"sm",for:"selectedWeek"},"Select Week"),r.a.createElement(q.a,{type:"select",id:"selectedWeek",name:"selectedWeek",value:this.props.selectedWeek,onChange:this.handleChange},r.a.createElement("option",{value:"reset"},"----"),this.state.weekSelection.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))))),this.props.chart_parent)}}]),t}(n.Component)),La=Object(b.b)((function(e){return{surveys:e.surveys.surveys,agent:e.surveys.agent,filtered_agent_data:e.surveys.filtered_agent_data,chart_data:e.surveys.chart_data,agent_chart_data:e.surveys.agent_chart_data,selectedMonth:e.surveys.selectedMonth,selectedYear:e.surveys.selectedYear,selectedWeek:e.surveys.selectedWeek,yearSelection:e.surveys.yearSelection}}),{updateChartData:function(e){return function(t){t({type:"UPDATE_CHART_DATA",payload:e})}},updatedSelectedMonth:function(e){return function(t){t({type:"UPDATE_SELECTED_MONTH",payload:e})}},updatedSelectedWeek:function(e){return function(t){t({type:"UPDATE_SELECTED_WEEK",payload:e})}},updatedSelectedYear:function(e){return function(t){t({type:"UPDATE_SELECTED_YEAR",payload:e})}},updateAgentChartData:function(e){return function(t){t({type:"UPDATE_AGENT_CHART_DATA",payload:e})}}})(Ia);function za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}Ma.d.global.defaultFontColor="white",Ma.d.global.legend.display=!0,Ma.d.global.title.position="top";var Ba=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={monthSelection:[],selectedMonth:"",curr_year:"",curr_month:"",curr_month_string:"",dateFilteredSurveys:[],dateFilteredRcas:[],noDataStyle:{lineHeight:"100px",textAlign:"center",margin:"auto"}},a.datasetKeyProvider=function(){return Math.random()},a.handleChange=function(e){var t;a.setState((t={},Object(E.a)(t,e.target.name,e.target.value),Object(E.a)(t,"dateFilteredSurveys",a.props.surveys.filter((function(t){return new Date(t.date_issued).getMonth()+1==e.target.value}))),Object(E.a)(t,"dateFilteredRcas",a.props.rcas.filter((function(t){return new Date(t.survey_date_issued).getMonth()+1==e.target.value}))),t))},a.getListTopDrivers=function(){return a.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!0===e.completed})).map((function(e){return e.dsat_cause.name})).reduce((function(e,t){return e[t]=1+e[t]||1,e}),{})}))},a.getTopDrivers=function(){var e=a.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!0===e.completed})).map((function(e){return e.dsat_cause.name})).reduce((function(e,t){return e[t]=1+e[t]||1,e}),{})}));return a.props.dsat_code1.map((function(t,n){var r=[];return e.forEach((function(e){return Object.keys(e).includes(t.name)?r.push(e[t.name]):r.push(0)})),{label:t.name,data:r,backgroundColor:a.props.colors[n]?a.props.colors[n]:a.getRandomColor()}})).filter((function(e){return 0!=e.data.reduce((function(e,t){return e-t}))}))},a.getAccountableTeams=function(){var e=a.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!0===e.completed})).map((function(e){return e.accountable_team})).reduce((function(e,t){return e[t]=1+e[t]||1,e}),{})}));return a.props.teams.map((function(t,n){var r=[];return e.forEach((function(e){return Object.keys(e).includes(t.name)?r.push(e[t.name]):r.push(0)})),{label:t.name,data:r,backgroundColor:a.props.colors[n]?a.props.colors[n]:a.getRandomColor()}})).filter((function(e){return 0!=e.data.reduce((function(e,t){return e-t}))}))},a.getSurveyPerSilo=function(){var e=a.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!0===e.completed})).map((function(e){return e.support_silo_issue_based})).reduce((function(e,t){return e[t]=1+e[t]||1,e}),{})}));return a.props.skills.map((function(t,n){var r=[];return e.forEach((function(e){return Object.keys(e).includes(t.name)?r.push(e[t.name]):r.push(0)})),{label:t.name,data:r,backgroundColor:a.props.colors[n]?a.props.colors[n]:a.getRandomColor()}})).filter((function(e){return 0!=e.data.reduce((function(e,t){return e-t}))}))},a.getSPGControllability=function(){var e=Object(R.a)(new Set(a.props.surveys.map((function(e){return e.budi_bu})))),t=a.props.chart_data.map((function(e){return Object.values(e)[0].map((function(e){return e.budi_bu})).reduce((function(e,t){return e[t]=1+e[t]||1,e}),{})}));return e.map((function(e,n){var r=[];return t.forEach((function(t){return Object.keys(t).includes(e)?r.push(t[e]):r.push(0)})),{label:e,data:r,backgroundColor:a.props.colors[n]?a.props.colors[n]:a.getRandomColor()}})).filter((function(e){return 0!=e.data.reduce((function(e,t){return e-t}))}))},a.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},a.chart_height=350,a.combinedData=a.props.surveys.map((function(e){var t=a.props.rcas.filter((function(t){return t.surveyed_ticket===e.reference_number}))[0];return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?za(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{},t)})),a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e;return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement("h4",null,r.a.createElement("strong",null,"Dashboard"))),r.a.createElement(B.a,null,r.a.createElement(La,{filtered_list:this.combinedData,chart_parent:r.a.createElement(n.Fragment,null,r.a.createElement(x.a,{className:"mt-3 px-3"},r.a.createElement(P.a,{className:"py-4 mx-2 border border-white"},r.a.createElement(Ma.c,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:[(e={label:"Bottombox %",data:this.props.chart_data.map((function(e){var t=Object.values(e)[0].length;return(Object.values(e)[0].filter((function(e){return 1===e.bottombox})).length/t*100).toFixed(2)})),backgroundColor:"white",fill:!0},Object(E.a)(e,"backgroundColor","rgba(100, 255, 0, .8)"),Object(E.a)(e,"borderColor","white"),e)],labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{title:{display:!0,text:"Bottombox % Trend",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[],yAxes:[{ticks:{callback:function(e){return e+"%"}}}]},plugins:{datalabels:{anchor:"end",align:"top",font:{weight:"bold"}}}},height:this.chart_height}))),r.a.createElement(x.a,{className:"mt-4 px-3"},r.a.createElement(P.a,{className:"py-4 mx-2 border border-white"},r.a.createElement(Ma.a,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:[{label:"Topbox",data:this.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return 1!=e.bottombox})).length})),backgroundColor:"#ffed00"},{label:"Bottombox",data:this.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return 1===e.bottombox})).length})),backgroundColor:"#64ff00"}],labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{title:{display:!0,text:"Bottombox count trend",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]},plugins:{datalabels:{anchor:"start",align:"top",font:{weight:"bold"},display:function(e){return e.dataset.data[e.dataIndex]>1}}}},height:this.chart_height})),r.a.createElement(P.a,{className:"py-4 ml-2 border border-white"},r.a.createElement(Ma.a,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:[{label:"Completed RCA",data:this.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!0===e.completed})).length})),backgroundColor:"#ffed00"},{label:"",data:this.props.chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return!1===e.completed})).length})),backgroundColor:"#64ff00"}],labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{title:{display:!0,text:"RCA completion count",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"},display:function(e){return e.dataset.data[e.dataIndex]>1}}}},height:this.chart_height}))),r.a.createElement(x.a,{className:"mt-4 px-3"},r.a.createElement(P.a,{className:"py-4 mx-2 border border-white"},r.a.createElement(Ma.a,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:this.getTopDrivers(),labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{barShowStroke:!1,title:{display:!0,text:"Bottombox Top Drivers",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{stacked:!0}],xAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"}},display:function(e){return e.dataset.data[e.dataIndex]>1}}},height:this.chart_height})),r.a.createElement(P.a,{className:"py-4 ml-2 border border-white"},r.a.createElement(Ma.a,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:this.getAccountableTeams(),labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{barShowStroke:!1,title:{display:!0,text:"Bottombox Accountable Teams",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{stacked:!0}],xAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"},color:"gray"},display:function(e){return e.dataset.data[e.dataIndex]>1}}},height:this.chart_height}))),r.a.createElement(x.a,{className:"mt-4 px-3"},r.a.createElement(P.a,{className:"py-4 mx-2 border border-white"},r.a.createElement(Ma.b,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:[{label:"ITSD Controllable",data:this.props.chart_data.map((function(e){return(Object.values(e)[0].filter((function(e){return"ITSD Controllable"===e.controllability})).length/Object.values(e)[0].filter((function(e){return!0===e.completed})).length*100).toFixed(2)})),backgroundColor:"#ffed00"},{label:"Non ITSD Controllable",data:this.props.chart_data.map((function(e){return(Object.values(e)[0].filter((function(e){return"Non ITSD Controllable"===e.controllability})).length/Object.values(e)[0].filter((function(e){return!0===e.completed})).length*100).toFixed(2)})),backgroundColor:"#64ff00"}],labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{title:{display:!0,text:"Bottombox Controllability",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"},color:"white"},display:function(e){return e.dataset.data[e.dataIndex]>1}}},height:this.chart_height})),r.a.createElement(P.a,{className:"py-4 ml-2 border border-white"},r.a.createElement(Ma.a,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:this.getSurveyPerSilo(),labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{barShowStroke:!1,title:{display:!0,text:"Survey Per SILO",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{stacked:!0}],xAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"},color:"gray"},display:function(e){return e.dataset.data[e.dataIndex]>1}}},height:this.chart_height}))),r.a.createElement(x.a,{className:"mt-4 px-3"},r.a.createElement(P.a,{className:"py-4 mx-2 border border-white"},r.a.createElement(Ma.b,{datasetKeyProvider:this.datasetKeyProvider,data:{datasets:this.getSPGControllability(),labels:this.props.chart_data.map((function(e){return Object.keys(e)[0]}))},options:{legend:{display:!0,position:"right",onClick:null},barShowStroke:!1,title:{display:!0,text:"SPG Controllability",fontSize:"20"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{stacked:!0}],xAxes:[{stacked:!0}]},plugins:{datalabels:{font:{weight:"bold"}},display:function(e){return e.dataset.data[e.dataIndex]>1}}},height:600}))))}))))}}]),t}(n.Component),Ua=Object(b.b)((function(e){return{agents:e.surveys.agents,agent:e.surveys.agent,teams:e.surveys.teams,agentCompState:e.surveys.agentCompState,teamleads:e.surveys.teamleads,skills:e.surveys.skills,surveys:e.surveys.surveys,filtered_data:e.surveys.filtered_data,chart_data:e.surveys.chart_data,rcas:e.surveys.rcas,dsat_code1:e.surveys.dsat_code1,agent_view_collapse:e.surveys.agent_view_collapse,bottombox_view_collapse:e.surveys.bottombox_view_collapse,colors:e.surveys.colors}}),{})(Ba),qa=a(29);function Ga(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ga(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ga(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Va=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",edit:!1,toggle:!1,code1_name:"",code2_name:"",code3_name:"",code1:"",code2:"",code3:"",code2_list:[],code3_list:[]},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleClick=function(e){"code1"===e.type&&(a.setState({toggle:!1,code1:e,code2:"",code2_list:a.props.bb_driver_code2.filter((function(t){return t.dsat_Code1===e.id})),code3:[]}),a.props.updateBBDriverState({toggle:!1,code1:e,code2:"",code2_list:a.props.bb_driver_code2.filter((function(t){return t.dsat_Code1===e.id})),code3:[]})),"code2"===e.type&&(a.setState({toggle:!1,code2:e,code3:"",code3_list:a.props.bb_driver_code3.filter((function(t){return t.bb_Driver_Code2===e.id}))}),a.props.updateBBDriverState({toggle:!1,code2:e,code3:"",code3_list:a.props.bb_driver_code3.filter((function(t){return t.bb_Driver_Code2===e.id}))})),"code3"===e.type&&(a.setState({toggle:!1,code3:e}),a.props.updateBBDriverState({toggle:!1,code3:e})),a.editOff(e)},a.showButtons=function(e){a.handleClick(e),a.editOff(e),a.setState({toggle:!0,name:e.name})},a.hideButtons=function(e){a.handleClick(e),a.editOff(e),a.setState({toggle:!1})},a.editOn=function(e){"code1"===e.type?a.setState({code1:e,edit:!0}):"code2"===e.type?a.setState({code1:"",code2:e,edit:!0}):"code3"===e.type&&a.setState({code1:"",code2:"",code3:e,edit:!0})},a.editOff=function(e){"code2"===e.type||"code3"===e.type?a.setState({edit:!1}):a.setState({code1:e,edit:!1})},a.handleAddDriverCode3Submit=function(e){e.preventDefault();var t={name:a.state.code3_name,bb_Driver_Code2:a.props.bbState.code2.id};a.props.addBbDriverCode3(t),a.setState({code3_name:""}),a.props.updateBBDriverState({code3_name:""})},a.handleAddDriverCode2Submit=function(e){e.preventDefault();var t={name:a.state.code2_name,dsat_Code1:a.props.bbState.code1.id};a.props.addBbDriverCode2(t),a.setState({code2_name:""}),a.props.updateBBDriverState({code2_name:""})},a.handleAddDsatCode1Submit=function(e){e.preventDefault();var t={name:a.state.code1_name};a.props.addDsatCode1(t),a.setState({code1_name:""}),a.props.updateBBDriverState({code2_name:""})},a.handleDelete=function(e){if("code1"===e.type){var t=a.props.rcas.filter((function(t){return t.dsat_cause.id===e.id}));a.props.deleteDsatCode1(e.id,t)}else if("code2"===e.type){var n=a.props.rcas.filter((function(t){return t.bb_driver_code2.id===e.id}));a.props.deleteBbDriverCode2(e.id,n)}else if("code3"===e.type){var r=a.props.rcas.filter((function(t){return t.bb_driver_code3.id===e.id}));a.props.deleteBbDriverCode3(e.id,r)}},a.handleEdit=function(e){if("code1"===e.type){var t={id:a.state.code1.id,name:a.state.name};a.props.updateDsatCode1(t)}if("code2"===e.type){var n={id:e.id,dsat_Code1:e.dsat_Code1,name:a.state.name};a.props.updateBbDriverCode2(n)}if("code3"===e.type){var r={id:e.id,bb_Driver_Code2:e.bb_Driver_Code2,name:a.state.name};a.props.updateBbDriverCode3(r)}},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(qa.a,null,r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement("h4",null,r.a.createElement("strong",null,"Bottombox Drivers"))),r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(ye.a,{hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x.a,{className:"mt-2"},r.a.createElement(P.a,{md:4},r.a.createElement("h5",{style:{color:"white"}},"Code 1")),r.a.createElement(P.a,{md:8,className:"mr-auto",style:{textAlign:"right"}},r.a.createElement(U.a,{onSubmit:this.handleAddDsatCode1Submit},r.a.createElement(x.a,null,r.a.createElement(P.a,{md:1},r.a.createElement("button",{className:"mr-2",style:{cursor:"pointer"},onSubmit:this.handleAddDsatCode1Submit},r.a.createElement("i",{className:"fa fa-plus",onSubmit:this.handleAddDsatCode1Submit}))),r.a.createElement(P.a,{className:"my-auto ml-2"},r.a.createElement(q.a,{bsSize:"sm",name:"code1_name",onChange:this.handleChange,value:this.state.code1_name,readOnly:!1,placeholder:"Enter new Bottombox Code 1",required:!0}))))))))),r.a.createElement("tbody",null,this.props.dsat_code1.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:e.props.bbState.code1.id===t.id?{backgroundColor:"gray"}:{backgroundColor:"white"}},r.a.createElement(x.a,null,e.state.edit&&e.state.code1.id===t.id?r.a.createElement(P.a,{md:8},r.a.createElement(U.a,null,r.a.createElement(ne.a,{size:"sm"},r.a.createElement(oe.a,{addonType:"prepend"},r.a.createElement("i",{onClick:function(){return e.handleEdit(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-check-square fa-2x","aria-hidden":"true"})),r.a.createElement(q.a,{bsSize:"sm",name:"name",onChange:e.handleChange,value:e.state.name,readOnly:!1,required:!0})))):r.a.createElement(P.a,{md:8},r.a.createElement("span",{onClick:function(){return e.handleClick(Ya({type:"code1"},t))},style:{cursor:"pointer"}},t.name)),e.state.toggle?e.state.code1.id!==t.id||e.state.code2?r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code1"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg","aria-hidden":"true"}))):r.a.createElement(P.a,{className:"my-auto"},r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.hideButtons(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-right fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.editOn(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-edit fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.handleDelete(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-minus-circle fa-lg mr-1 icon","aria-hidden":"true"})))):r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code1"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code1"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg icon","aria-hidden":"true"}))))))}))))),this.props.bbState.code1&&r.a.createElement(P.a,null,r.a.createElement(ye.a,{hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x.a,{className:"mt-2"},r.a.createElement(P.a,{md:4},r.a.createElement("h5",{style:{color:"white"}},"Code 2")),r.a.createElement(P.a,{md:8,className:"mr-auto",style:{textAlign:"right"}},r.a.createElement(U.a,{onSubmit:this.handleAddDriverCode2Submit},r.a.createElement(x.a,null,r.a.createElement(P.a,{md:1},r.a.createElement("button",{className:"mr-2",style:{cursor:"pointer"},onSubmit:this.handleAddDriverCode2Submit},r.a.createElement("i",{className:"fa fa-plus",onSubmit:this.handleAddDriverCode2Submit}))),r.a.createElement(P.a,{className:"my-auto ml-2"},r.a.createElement(q.a,{bsSize:"sm",name:"code2_name",onChange:this.handleChange,value:this.state.code2_name,readOnly:!1,placeholder:"Enter new Bottombox Code 2",required:!0}))))))))),r.a.createElement("tbody",null,this.props.bb_driver_code2.filter((function(t){return t.dsat_Code1===e.props.bbState.code1.id})).map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:e.props.bbState.code2.id===t.id?{backgroundColor:"gray"}:{backgroundColor:"white"}},r.a.createElement(x.a,null,e.state.edit&&e.state.code2.id===t.id?r.a.createElement(P.a,{md:8},r.a.createElement(U.a,null,r.a.createElement(ne.a,{size:"sm"},r.a.createElement(oe.a,{addonType:"prepend"},r.a.createElement("i",{onClick:function(){return e.handleEdit(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-check-square fa-2x","aria-hidden":"true"})),r.a.createElement(q.a,{bsSize:"sm",name:"name",onChange:e.handleChange,value:e.state.name,readOnly:!1,required:!0})))):r.a.createElement(P.a,{md:8},r.a.createElement("span",{onClick:function(){return e.handleClick(Ya({type:"code2"},t))},style:{cursor:"pointer"}},t.name)),e.state.toggle?e.state.code2.id!==t.id||e.state.code3?r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code2"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg","aria-hidden":"true"}))):r.a.createElement(P.a,{className:"my-auto"},r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.hideButtons(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-right fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.editOn(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-edit fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.handleDelete(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-minus-circle fa-lg mr-1 icon","aria-hidden":"true"})))):r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code2"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code2"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg icon","aria-hidden":"true"}))))))}))))),this.props.bbState.code2&&r.a.createElement(P.a,{md:4},r.a.createElement(ye.a,{hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(x.a,{className:"mt-2"},r.a.createElement(P.a,{md:4},r.a.createElement("h5",{style:{color:"white"}},"Code 3")),r.a.createElement(P.a,{md:8,className:"mr-auto",style:{textAlign:"right"}},r.a.createElement(U.a,{onSubmit:this.handleAddDriverCode3Submit},r.a.createElement(x.a,null,r.a.createElement(P.a,{md:1},r.a.createElement("button",{className:"mr-2",style:{cursor:"pointer"},onSubmit:this.handleAddDriverCode3Submit},r.a.createElement("i",{className:"fa fa-plus",onSubmit:this.handleAddDriverCode3Submit}))),r.a.createElement(P.a,{className:"my-auto ml-2"},r.a.createElement(q.a,{bsSize:"sm",name:"code3_name",onChange:this.handleChange,value:this.state.code3_name,readOnly:!1,placeholder:"Enter new Bottombox Code 3",required:!0}))))))))),r.a.createElement("tbody",null,this.props.bb_driver_code3.filter((function(t){return t.bb_Driver_Code2===e.props.bbState.code2.id})).map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{style:e.props.bbState.code3.id===t.id?{backgroundColor:"gray"}:{backgroundColor:"white"}},r.a.createElement(x.a,null,e.state.edit&&e.state.code3.id===t.id?r.a.createElement(P.a,{md:8},r.a.createElement(U.a,null,r.a.createElement(ne.a,{size:"sm"},r.a.createElement(oe.a,{addonType:"prepend"},r.a.createElement("i",{onClick:function(){return e.handleEdit(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-check-square fa-2x","aria-hidden":"true"})),r.a.createElement(q.a,{bsSize:"sm",name:"name",onChange:e.handleChange,value:e.state.name,readOnly:!1,required:!0})))):r.a.createElement(P.a,{md:8},r.a.createElement("span",{onClick:function(){return e.handleClick(Ya({type:"code3"},t))},style:{cursor:"pointer"}},t.name)),e.state.toggle?e.state.code3.id===t.id?r.a.createElement(P.a,{className:"my-auto"},r.a.createElement(n.Fragment,null,r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.hideButtons(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-right fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.editOn(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-edit fa-lg icon","aria-hidden":"true"})),r.a.createElement("span",{style:{float:"right"}},r.a.createElement("i",{onClick:function(){return e.handleDelete(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-minus-circle fa-lg mr-1 icon","aria-hidden":"true"})))):r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code3"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg","aria-hidden":"true"}))):r.a.createElement(P.a,null,r.a.createElement("span",{onClick:function(){return e.showButtons(Ya({type:"code3"},t))},style:{float:"right",cursor:"pointer"}},r.a.createElement("i",{onClick:function(){return e.showButtons(Ya({type:"code3"},t))},style:{color:"black",cursor:"pointer"},className:"fa fa-chevron-circle-left fa-lg icon","aria-hidden":"true"}))))))}))))))))))}}]),t}(n.Component),Wa=Object(b.b)((function(e){return{dsat_code1:e.surveys.dsat_code1,bb_driver_code2:e.surveys.bb_driver_code2,bb_driver_code3:e.surveys.bb_driver_code3,bbState:e.surveys.bbState,rcas:e.surveys.rcas}}),{addDsatCode1:Vt,addBbDriverCode2:Wt,addBbDriverCode3:Kt,deleteDsatCode1:function(e,t){return function(a,n){a({type:g}),C.a.delete("/api/dsat_code1/".concat(e),Pt(n)).then((function(r){a({type:"DELETE_DSAT_CODE1",payload:e}),t.forEach((function(e){C.a.put("/api/surveys/".concat(e.surveyed_ticket,"/"),{agent:e.agent,completed:!1},Pt(n)).then((function(e){a({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))}))})).catch((function(e){return console.log(e.response.data)}))}},updateDsatCode1:function(e){return function(t,a){t({type:g}),C.a.put("/api/dsat_code1/".concat(e.id,"/"),e,Pt(a)).then((function(e){console.log(e.data),t({type:"UPDATE_DSAT_CODE1",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},updateBbDriverCode2:function(e){return function(t,a){t({type:g}),C.a.put("/api/bb_driver_code2/".concat(e.id,"/"),e,Pt(a)).then((function(e){t({type:"UPDATE_BB_DRIVER_CODE2",payload:e.data})})).catch((function(e){return console.log(e.response)}))}},updateBBDriverState:function(e){return function(t){t({type:"UPDATE_BOTTOMBOX_DRIVER_STATE",payload:e})}},deleteBbDriverCode2:function(e,t){return function(a,n){a({type:g}),C.a.delete("/api/bb_driver_code2/".concat(e),Pt(n)).then((function(r){a({type:"DELETE_BB_DRIVER_CODE2",payload:e}),t.forEach((function(e){C.a.put("/api/surveys/".concat(e.surveyed_ticket,"/"),{agent:e.agent,completed:!1},Pt(n)).then((function(e){a({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))}))})).catch((function(e){return console.log(e.response.data)}))}},deleteBbDriverCode3:function(e,t){return function(a,n){a({type:g}),C.a.delete("/api/bb_driver_code3/".concat(e),Pt(n)).then((function(r){a({type:"DELETE_BB_DRIVER_CODE3",payload:e}),t.forEach((function(e){C.a.put("/api/surveys/".concat(e.surveyed_ticket,"/"),{agent:e.agent,completed:!1},Pt(n)).then((function(e){a({type:"UPDATE_SURVEY",payload:e.data})})).catch((function(e){return console.log(e.response)}))}))})).catch((function(e){return console.log(e.response.data)}))}},updateBbDriverCode3:function(e){return function(t,a){t({type:g}),C.a.put("/api/bb_driver_code3/".concat(e.id,"/"),e,Pt(a)).then((function(e){t({type:"UPDATE_BB_DRIVER_CODE3",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(Va),Ka=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:{},isOpen:!1},a.handleClick=function(e){a.setState((function(t,a){return{activeItem:e,isOpen:!0}}))},a.closeCallback=function(e){a.setState((function(e,t){return{isOpen:!1}}))},a.survey_list=function(e){return e||[]},a.style={color:"white"},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.props.survey_list?r.a.createElement(n.Fragment,null,r.a.createElement(ye.a,{size:"sm"},r.a.createElement("thead",{style:this.style},r.a.createElement("tr",null,r.a.createElement("th",null,"Survey Number"),r.a.createElement("th",null,"Customer Name"),r.a.createElement("th",null,"Average Score"),r.a.createElement("th",null,"Survey Category"),r.a.createElement("th",null,"RCA"),r.a.createElement("th",null,"Date Issued"))),r.a.createElement("tbody",{style:this.style},this.survey_list(this.props.survey_list).sort((function(e,t){return new Date(t.date_issued)-new Date(e.date_issued)})).map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("tr",null,r.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.handleClick(t)}},t.reference_number),r.a.createElement("td",null,t.first_name," ",t.last_name),r.a.createElement("td",null,t.average_score),r.a.createElement("td",null,1===t.bottombox?"Bottombox":"Topbox"),r.a.createElement("td",null,!0===t.completed?"Completed":"Not Completed"),r.a.createElement("td",null,t.date_issued)),e.state.activeItem?e.state.activeItem.reference_number===t.reference_number&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},r.a.createElement(I.a,{isOpen:e.state.isOpen},r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Zt,{survey:e.state.activeItem,parentCallback:e.closeCallback})))))):r.a.createElement("tr",null,r.a.createElement("td",null)))}))))):r.a.createElement(n.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,"No Data")))}}]),t}(n.Component);function Ha(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Qa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ha(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ha(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Xa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).state={table:{},modal:!1,email:"",location:"",name:"",operator_lan_id:"",skill:"",surveys:[],team_lead:"",wave:""},a.agent_list=a.props.agents.map((function(e){return r.a.createElement("option",{key:e.operator_lan_id,value:e.name},e.name)})),a.team_lead_list=a.props.teamleads.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)})),a.skills_list=a.props.skills.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)})),a.agent_survey_list=function(e){if(e)return e.map((function(e){var t={};return a.props.surveys.forEach((function(a){if(a.reference_number===e)return t=a})),t}))},a.handleSubmit=function(e){e.preventDefault();var t=a.state;delete t.modal,t.operator_lan_id=a.props.agent.operator_lan_id,t.name=a.props.agent.name,a.props.updateAgent(t)},a.handleModalState=function(e){a.setState({modal:e})},a.handleAgentSelect=function(e){var t=e.target.options.selectedIndex;if(0!=t){var n=a.props.agents[t-1];null===n.skill&&(n.skill=""),null===n.team_lead&&(n.team_lead=""),a.props.getAgent(n),a.setState(Qa({},n))}else{a.props.getAgent({}),a.setState({table:{},email:"",location:"",name:"",operator_lan_id:"",skill:"",surveys:[],team_lead:"",wave:""})}},a.handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.getListIncompleteAgentForm=function(){return a.props.agents.filter((function(e){return Object.values(e).includes("")})).length},a.handleModal=function(e){a.setState((function(t,a){return{modal:!t.modal,table:e}}))},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState(Qa({},this.state,{},this.props.agent))}},{key:"render",value:function(){var e=this,t={label_name:"Add Agent Skill",data_name:"addSkill"},a={label_name:"Add Team Lead",data_name:"addTeamLead"};return r.a.createElement(n.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement("h4",null,r.a.createElement("strong",null,"Agents View")," ",r.a.createElement("span",{style:{fontSize:"14px"}},r.a.createElement(Ze.a,{color:"danger",pill:!0},this.getListIncompleteAgentForm())))),r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(U.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"name"},"Select Agent"),r.a.createElement(q.a,{type:"select",name:"name",id:"name",value:this.state.name,onChange:this.handleAgentSelect},r.a.createElement("option",null,"-----"),this.agent_list)),r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"operator_lan_id"},"Operator Lan ID"),r.a.createElement(q.a,{type:"input",name:"operator_lan_id",id:"operator_lan_id",value:this.state.operator_lan_id,onChange:this.handleChange,readOnly:!0}))),r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"email"},"Email"),r.a.createElement(q.a,{type:"input",name:"email",id:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(P.a,{md:3},r.a.createElement(pe.a,{for:"location"},"Location"),r.a.createElement(q.a,{type:"input",name:"location",id:"location",value:this.state.location,onChange:this.handleChange})),r.a.createElement(P.a,{md:3},r.a.createElement(pe.a,{for:"wave"},"Wave"),r.a.createElement(q.a,{type:"input",name:"wave",id:"emawaveil",value:this.state.wave,onChange:this.handleChange}))),r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"skill"},"Skills"," ",r.a.createElement("i",{onClick:function(){return e.handleModal(t)},style:{color:"green",cursor:"pointer"},className:"fa fa-plus icon","aria-hidden":"true"}),r.a.createElement(Pa,{data_name:this.state.table.data_name,label_name:this.state.table.label_name,modal:this.state.modal,onModalChange:this.handleModalState,table_data:""})),r.a.createElement(q.a,{type:"select",name:"skill",id:"skill",value:this.state.skill,onChange:this.handleChange},r.a.createElement("option",null,"-----"),this.skills_list)),r.a.createElement(P.a,null,r.a.createElement(pe.a,{for:"team_lead"},"Team Lead"," ",r.a.createElement("i",{onClick:function(){return e.handleModal(a)},style:{color:"green",cursor:"pointer"},className:"fa fa-plus icon","aria-hidden":"true"}),r.a.createElement(Pa,{data_name:this.state.table.data_name,label_name:this.state.table.label_name,modal:this.state.modal,onModalChange:this.handleModalState,table_data:""})),r.a.createElement(q.a,{type:"select",name:"team_lead",id:"team_lead",value:this.state.team_lead,onChange:this.handleChange},r.a.createElement("option",null,"-----"),this.team_lead_list))),r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement(Y.a,{color:"primary",onClick:this.handleSubmit},"Update"))))),this.props.agent.surveys&&r.a.createElement(P.a,{md:6},r.a.createElement(x.a,null,r.a.createElement(P.a,null,"Survey Chart / List")),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(La,{filtered_list:this.props.filtered_agent_data,chart_parent:r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(Ma.a,{data:{datasets:[{label:"Topbox",data:this.props.agent_chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return 1!=e.bottombox})).length})),backgroundColor:"#ffed00"},{label:"Bottombox",data:this.props.agent_chart_data.map((function(e){return Object.values(e)[0].filter((function(e){return 1===e.bottombox})).length})),backgroundColor:"#64ff00"}],labels:this.props.agent_chart_data.map((function(e){return Object.keys(e)[0]}))},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}},height:300})))}))),r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement(Ka,{survey_list:this.props.agent_chart_data.map((function(e){return Object.values(e)[0]})).flat(1/0)}))))))))}}]),t}(n.Component),Ja=Object(b.b)((function(e){return{agents:e.surveys.agents,agent:e.surveys.agent,agentCompState:e.surveys.agentCompState,teamleads:e.surveys.teamleads,skills:e.surveys.skills,surveys:e.surveys.surveys,filtered_agent_data:e.surveys.filtered_agent_data,chart_data:e.surveys.chart_data,agent_chart_data:e.surveys.agent_chart_data}}),{updateAgentComponentState:function(e){return function(t){t({type:"UPDATE_AGENTS_COMPONENT_STATE",payload:e})}},getAgent:function(e){return function(t){t({type:"GET_AGENT",payload:e})}},updateAgent:function(e){return function(t,a){t({type:g}),C.a.put("/api/agents/".concat(e.operator_lan_id,"/"),e,Pt(a)).then((function(e){console.log(e.data),t({type:"UPDATE_AGENT",payload:e.data})})).catch((function(e){return console.log(e.response)}))}}})(Xa),Za=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllData2()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.props.isFetching?r.a.createElement(F.a,{style:{width:"3rem",height:"3rem",top:"50%",left:"50%",position:"fixed"}}):r.a.createElement("div",null,r.a.createElement(qa.a,null,r.a.createElement("div",{className:"sidebar-main"},r.a.createElement(Ra,null))),r.a.createElement("div",{className:"main mb-5"},r.a.createElement(I.a,{isOpen:this.props.survey_view_collapse},r.a.createElement("div",{className:"section"},r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement("h4",null,r.a.createElement("strong",null,"Survey View"))),r.a.createElement(B.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(qa.a,null,r.a.createElement(pa,null)))),r.a.createElement(x.a,{className:"mt-3"},r.a.createElement(P.a,null,r.a.createElement(qa.a,null,r.a.createElement(Ea,null)))))))),r.a.createElement(I.a,{isOpen:this.props.agent_view_collapse},r.a.createElement("div",{className:"section"},r.a.createElement(qa.a,null,r.a.createElement(Ja,null)))),r.a.createElement("div",{className:"section"},r.a.createElement(I.a,{isOpen:this.props.bottombox_view_collapse},r.a.createElement(qa.a,null,r.a.createElement(Wa,null)))),r.a.createElement("div",{className:"section"},r.a.createElement(I.a,{isOpen:this.props.dashboard_view_collapse},r.a.createElement(qa.a,null,r.a.createElement(Ua,null)))))))}}]),t}(n.Component),$a=Object(b.b)((function(e){return{surveys:e.surveys.surveys,isFetching:e.surveys.isFetching,bottombox:e.surveys.bottombox,agents:e.surveys.agents,rcas:e.surveys.rcas,agent_view_collapse:e.surveys.agent_view_collapse,bottombox_view_collapse:e.surveys.bottombox_view_collapse,survey_view_collapse:e.surveys.survey_view_collapse,dashboard_view_collapse:e.surveys.dashboard_view_collapse,auth:e.auth}}),{getSurveys:Rt,getSkills:Bt,getDsatCode1:Ut,getBBDriverCode2:qt,getBBDriverCode3:Gt,removeSurvey:Lt,getTeams:Yt,getRcas:function(){return function(e){e({type:g}),C.a.get("/api/rca/").then((function(t){return e({type:"GET_RCAS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},getAgents:function(){return function(e){e({type:g}),C.a.get("/api/agents/").then((function(t){return e({type:"GET_AGENTS",payload:t.data})})).catch((function(e){return console.log(e.response.data)}))}},getAllData2:function(){return function(e,t){e({type:g}),C.a.all([C.a.get("/api/surveys/",Pt(t)),C.a.get("/api/rca/",Pt(t)),C.a.get("/api/skills/"),C.a.get("/api/dsat_code1/"),C.a.get("/api/bb_driver_code2/"),C.a.get("/api/bb_driver_code3/"),C.a.get("/api/team/"),C.a.get("/api/agents/"),C.a.get("/api/teamleads/")]).then(C.a.spread((function(t,a,n,r,c,l,s,o,i){e({type:"GET_ALL_DATA",payload:{surveys:t.data,rcas:a.data,skills:n.data,dsat_code1:r.data,bb_driver_code2:c.data,bb_driver_code3:l.data,teams:s.data,agents:o.data,teamleads:i.data}}),e({type:v})}))).catch((function(t){e({type:v}),console.log(t.response)}))}}})(Za),en=a(104),tn=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.alert,r=t.message;a!==e.error&&(a.msg.username&&n.error(a.msg.username[0]),a.msg.email&&n.error(a.msg.email[0])),r!==e.message&&(r.surveyDeleted&&n.success(r.surveyDeleted)||r.passwordsNotMatch&&n.error(r.passwordsNotMatch))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null)}}]),t}(n.Component),an=Object(b.b)((function(e){return{error:e.errors,message:e.messages}}))(Object(en.b)()(tn)),nn=a(260),rn=function(e){var t=Object(b.c)(),a=Object(b.d)((function(e){return e.auth.user}));Object(b.d)((function(e){return e.ccms.access_request}));return console.log(a),r.a.createElement(N.a,null,r.a.createElement("h2",null,"You are currently not authorized to access this app. Click this"," ",r.a.createElement("a",{href:"#",onClick:function(e){return t((n=a,function(e){C.a.post("/api/ccms_access_request/",{user:n}).then((function(t){e({type:"ADD_REQUEST_ACCESS",payload:t.data}),console.log(t.data)})).catch((function(e){return console.log(e.response)}))}));var n}},"link"),"to request access"," "))},cn=function(e){function t(e){var a;return Object(u.a)(this,t),a=Object(d.a)(this,Object(p.a)(t).call(this,e)),e.get_access_request(),a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.auth,n=e.name,c=e.access_request_list,l=Object(nn.a)(e,["component","auth","name","access_request_list"]);return r.a.createElement(f.a,Object.assign({},l,{render:function(e){return a.user?"Ccms"==n?(a.user||{}).group_list.includes("CCMS Admin")||(a.user||{}).is_member_of_ccms_owners?r.a.createElement(t,e):c&&a.user&&0!=c.filter((function(e){return e.user.username==a.user.username})).length?r.a.createElement(ln,null):r.a.createElement(rn,null):"BottomBox"==n?r.a.createElement(t,e):void 0:r.a.createElement(F.a,null)}}))}}]),t}(n.Component),ln=function(e){return r.a.createElement(N.a,null,r.a.createElement("h3",null,"You already have requested access. Click here to follow up"))},sn=Object(b.b)((function(e){return{auth:e.auth,access_request_list:e.ccms.access_request}}),{get_access_request:function(){return function(e){C.a.get("/api/ccms_access_request/").then((function(t){e({type:"GET_REQUEST_ACCESS",payload:t.data})}))}}})(cn),on=a(14),un=a(595),mn=a(596),dn=a(597),pn=a(598),_n=(a(557),a(261)),hn=a.n(_n);function fn(e){return e.user.avatar?r.a.createElement("img",{src:e.user.avatar,alt:"user",className:"rounded-circle align-self-center mr-2",style:{width:"32px"}}):r.a.createElement("i",{className:"far fa-user-circle fa-lg rounded-circle align-self-center mr-2",style:{width:"32px"}})}function bn(e){return e.isAuthenticated?r.a.createElement(un.a,null,r.a.createElement(ce.a,{nav:!0,caret:!0,style:{color:"white"}},r.a.createElement(fn,{user:e.user})),r.a.createElement(le.a,{right:!0},r.a.createElement("h5",{className:"dropdown-item-text mb-0"},e.user.fullname),r.a.createElement("p",{className:"dropdown-item-text text-muted mb-0"},e.user.username),r.a.createElement(se.a,{divider:!0}),r.a.createElement(se.a,null,r.a.createElement(Oa.a,{style:{cursor:"pointer",color:"black"},onClick:function(e){return window.location.href="/signout"}},"Sign Out")))):r.a.createElement(va.a,null,r.a.createElement(Oa.a,{style:{cursor:"pointer",color:"white"},onClick:function(e){return window.location.href="/signin"}},"Sign In"))}var yn=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).toggle=a.toggle.bind(Object(on.a)(a)),a.state={isOpen:!1},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props.auth,t=e.user,a=e.isAuthenticated;return r.a.createElement("div",{className:"navbar-main"},r.a.createElement(mn.a,{style:{backgroundColor:"black",padding:"20px"},expand:"md",fixed:"top"},r.a.createElement(dn.a,null,r.a.createElement("img",{src:hn.a,width:"250",height:"45",alt:"Logo"})),r.a.createElement(pn.a,{onClick:this.toggle}),r.a.createElement(I.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(ga.a,{className:"mr-auto",navbar:!0},r.a.createElement(va.a,null,r.a.createElement(h.b,{to:"/cba",className:"nav-link",exact:!0,style:{color:"white"}},"Home"))),r.a.createElement(ga.a,{className:"justify-content-end",navbar:!0},r.a.createElement(va.a,null),r.a.createElement(bn,{isAuthenticated:a,authButtonMethod:this.props.authButtonMethod,user:t})))))}}]),t}(r.a.Component),En=Object(b.b)((function(e){return{auth:e.auth}}),{})(yn),gn=a(599),vn=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=null;return this.props.debug&&(e=r.a.createElement("pre",{className:"alert-pre border bg-light p-2"},r.a.createElement("code",null,this.props.debug))),r.a.createElement(gn.a,{color:"danger"},r.a.createElement("p",{className:"mb-3"},this.props.message),e)}}]),t}(r.a.Component),On=a(600),Cn=(a(558),function(e){return e.isAuthenticated?r.a.createElement("div",{className:"mt-2"},r.a.createElement("h4",{style:{color:"white"}},"Welcome ",e.user.fullname,"!")):r.a.createElement(F.a,{style:{width:"3rem",height:"3rem",top:"50%",left:"50%",position:"fixed"}})}),Sn=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={isHovered:!1,target_div:null},a.handleMouseEnter=function(e){a.setState({isHovered:!0,target_div:e.target.id})},a.handleMouseLeave=function(){a.setState({isHovered:!1,target_div:null})},a.div_style=function(e){return{backgroundColor:"black",width:null!==a.state.target_div||a.state.isHovered?a.state.isHovered&&a.state.target_div===e?"80%":"20%":"50%",height:"400px",transition:"width 0.5s"}},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.user,a=e.isAuthenticated;return r.a.createElement(n.Fragment,null,r.a.createElement(On.a,{style:{backgroundColor:"black"}},r.a.createElement("div",{className:"jumbotroncontent"},r.a.createElement("h1",{className:"mb-2 mt-4",style:{color:"white"}},"DXC - CBA App Site"),r.a.createElement(Cn,{isAuthenticated:a,user:t}))),r.a.createElement("div",{className:"section-main"},r.a.createElement(qa.a,null,r.a.createElement(N.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(h.b,{to:"/bottombox",className:"section-navlink",exact:!0,style:{textDecoration:"none"}},r.a.createElement("h5",{id:"section1"},"CBA Surveys"))),r.a.createElement(P.a,null,r.a.createElement(h.b,{to:"/ccms",className:"section-navlink",exact:!0,style:{textDecoration:"none"}},r.a.createElement("h5",{id:"section2"},"CCMS"))),r.a.createElement(P.a,null,r.a.createElement("a",{href:"https://localhost:443/eval",className:"section-navlink",style:{textDecoration:"none"}},r.a.createElement("h5",{id:"section3"},"Quality Evaluatons"))),r.a.createElement(P.a,null,r.a.createElement(h.b,{to:"/",className:"section-navlink",exact:!0,style:{textDecoration:"none"}},r.a.createElement("h5",{id:"section4"},"Email Factory"))))))))}}]),t}(r.a.Component),Dn=Object(b.b)((function(e){return{auth:e.auth}}),[])(Sn),kn=a(262),jn=a(53),Tn=a(263),wn=a(264);function An(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?An(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):An(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xn=(new Date).getFullYear(),Pn=function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1;return Array.from(new Array(n),(function(e,t){return t+1})).map((function(t){var n=e.filter((function(e){return new Date(e.date_issued).getMonth()+1==t&&new Date(e.date_issued).getFullYear()==a})),r=(0,new Intl.DateTimeFormat("en-US",{month:"short"}).format)(new Date("".concat(a,"-").concat(t,"-01")));return Object(E.a)({},r,n)}))},Fn={upload_failed_surveys:[],colors:["#ffed00","#64ff00","#00c9ff","white","#666666","#d9d9d9"],agent_view_collapse:!1,bottombox_view_collapse:!1,survey_view_collapse:!0,dashboard_view_collapse:!0,surveys:[],agents:[],headers:ka,survey:{},agent:{},skills:[],dsat_code1:[],bb_driver_code2:[],bb_driver_code3:[],teams:[],rcas:null,teamleads:[],bottombox:[],isFetching:!1,agent_headers:["operator_lan_id","surveys","name","email","location","wave","skill","team_lead"],rca:{},doughnutChartSurveyData:[],pieChartCompletedSurveysCount:[],rcaTopDriversLabels:{},bbState:{name:"",edit:!1,toggle:!1,code1_name:"",code2_name:"",code1:"",code2:"",code2_list:[],code3_list:[]},agentCompState:{},filtered_agent_data:[],chart_data:[],selectedMonth:"",selectedWeek:"",selectedYear:xn,yearSelection:[],agent_chart_data:[],surveys_view:[]},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_DATA":var a=t.payload,n=a.surveys,r=a.rcas,c=a.skills,l=a.dsat_code1,s=a.bb_driver_code2,o=a.bb_driver_code3,i=a.teams,u=a.agents,m=a.teamleads;return Nn({},e,{surveys:n,surveys_view:n,bottombox:n.filter((function(e){return 1==e.bottombox&&!e.rca})),pieChartCompletedSurveysCount:[n.filter((function(e){return 1==e.completed})).length,n.length],rcas:r,skills:c,dsat_code1:l,bb_driver_code2:s,bb_driver_code3:o,teams:i,agents:u,teamleads:m,yearSelection:[(new Date).getFullYear()].concat(Object(R.a)(new Set(n.map((function(e){return new Date(e.date_issued).getFullYear()}))))),chart_data:Pn(n.map((function(e){var t=r.filter((function(t){return t.surveyed_ticket===e.reference_number}))[0];return Nn({},e,{},t)})).filter((function(e){return new Date(e.date_issued).getFullYear()===xn})))});case"GET_ALL_SURVEY_VIEW":return Nn({},e,{surveys_view:e.surveys});case"GET_COMPLETED_SURVEY_VIEW":return Nn({},e,{surveys_view:e.surveys.filter((function(e){return!0===e.completed}))});case"GET_BOTTOMBOX_SURVEY_VIEW":return Nn({},e,{surveys_view:e.surveys.filter((function(e){return 1===e.bottombox&&!1===e.completed}))});case"GET_TOPBOX_SURVEY_VIEW":return Nn({},e,{surveys_view:e.surveys.filter((function(e){return 0===e.bottombox&&!1===e.completed}))});case"COLLAPSE_DASHBOARD_VIEW":return Nn({},e,{dashboard_view_collapse:!e.dashboard_view_collapse});case"COLLAPSE_SURVEY_VIEW":return Nn({},e,{survey_view_collapse:!e.survey_view_collapse});case"COLLAPSE_BOTTOMBOX_DRIVER_VIEW":return Nn({},e,{bottombox_view_collapse:!e.bottombox_view_collapse});case"COLLAPSE_AGENT_VIEW":return Nn({},e,{agent_view_collapse:!e.agent_view_collapse});case"UPDATE_SELECTED_YEAR":case"UPDATE_SELECTED_WEEK":return Nn({},e,{selectedWeek:t.payload});case"UPDATE_SELECTED_MONTH":return Nn({},e,{selectedMonth:t.payload});case"UPDATE_CHART_DATA":return Nn({},e,{chart_data:t.payload});case"UPDATE_AGENT_CHART_DATA":return Nn({},e,{agent_chart_data:t.payload});case"UPDATE_BOTTOMBOX_DRIVER_STATE":return Nn({},e,{bbState:Nn({},e.bbState,{},t.payload)});case"UPDATE_AGENTS_COMPONENT_STATE":return Nn({},e,{agentCompState:Nn({},e.agentCompState,{},t.payload)});case g:return Nn({},e,{isFetching:!0});case v:return Nn({},e,{isFetching:!1});case"GET_SURVEYS":return Nn({},e,{surveys:t.payload,bottombox:t.payload.filter((function(e){return 1==e.bottombox&&!e.rca})),isFetching:!1});case"GET_AGENTS":return Nn({},e,{agents:t.payload,isFetching:!1});case"GET_RCAS":return Nn({},e,{rcas:t.payload,isFetching:!1});case"DELETE_SURVEY":return Nn({},e,{surveys:e.surveys.filter((function(e){return t.payload!=e.reference_number})),surveys_view:e.surveys_view.filter((function(e){return t.payload!=e.reference_number})),bottombox:e.bottombox.filter((function(e){return t.payload!=e.reference_number})),rcas:e.rcas.filter((function(e){return t.payload!=e.surveyed_ticket})),isFetching:!1});case"ADD_SURVEY":return Nn({},e,{surveys:[t.payload].concat(Object(R.a)(e.surveys)),surveys_view:[t.payload].concat(Object(R.a)(e.surveys_view))});case"ADD_FAILED_SURVEY":return Nn({},e,{upload_failed_surveys:[t.payload].concat(Object(R.a)(e.upload_failed_surveys))});case"GET_BOTTOMBOX":return Nn({},e,{bottombox:[].concat(Object(R.a)(1==t.payload.bottombox&&[t.payload]),Object(R.a)(e.bottombox))});case"GET_SURVEY":return Nn({},e,{survey:t.payload});case"REMOVE_SURVEY":return Nn({},e,{survey:t.payload,agent:{}});case"GET_AGENT":return Nn({},e,{agent:t.payload,filtered_agent_data:e.surveys.filter((function(e){return e.operator_lan_id===t.payload.operator_lan_id})),agent_chart_data:Pn(e.surveys.map((function(t){var a=e.rcas.filter((function(e){return e.surveyed_ticket===t.reference_number}))[0];return Nn({},t,{},a)})).filter((function(e){return new Date(e.date_issued).getFullYear()===xn})).filter((function(e){return e.operator_lan_id===t.payload.operator_lan_id})).filter((function(e){return new Date(e.date_issued).getFullYear()===xn}))),selectedMonth:""});case"GET_SKILLS":return Nn({},e,{skills:t.payload,isFetching:!1});case"GET_DSAT_CODE1":return Nn({},e,{dsat_code1:t.payload,isFetching:!1});case"DELETE_DSAT_CODE1":return Nn({},e,{dsat_code1:e.dsat_code1.filter((function(e){return t.payload!=e.id})),isFetching:!1});case"UPDATE_DSAT_CODE1":return Nn({},e,{dsat_code1:e.dsat_code1.map((function(e){return e.id==t.payload.id?t.payload:e})),isFetching:!1});case"DELETE_BB_DRIVER_CODE2":return Nn({},e,{bb_driver_code2:e.bb_driver_code2.filter((function(e){return t.payload!=e.id})),isFetching:!1});case"DELETE_BB_DRIVER_CODE3":return Nn({},e,{bb_driver_code3:e.bb_driver_code3.filter((function(e){return t.payload!=e.id})),isFetching:!1});case"UPDATE_BB_DRIVER_CODE2":return Nn({},e,{bb_driver_code2:e.bb_driver_code2.map((function(e){return e.id==t.payload.id?t.payload:e})),isFetching:!1});case"UPDATE_BB_DRIVER_CODE3":return Nn({},e,{bb_driver_code3:e.bb_driver_code3.map((function(e){return e.id==t.payload.id?t.payload:e})),isFetching:!1});case"GET_BB_DRIVER_CODE2":return Nn({},e,{bb_driver_code2:t.payload,isFetching:!1});case"GET_BB_DRIVER_CODE3":return Nn({},e,{bb_driver_code3:t.payload,isFetching:!1});case"GET_TEAMS":return Nn({},e,{teams:t.payload,isFetching:!1});case"ADD_TEAM":return Nn({},e,{teams:[t.payload].concat(Object(R.a)(e.teams)),isFetching:!1});case"ADD_RCA":return Nn({},e,{rcas:[t.payload].concat(Object(R.a)(e.rcas)),bottombox:e.bottombox.filter((function(e){return t.payload.surveyed_ticket!=e.reference_number})),pieChartCompletedSurveysCount:e.pieChartCompletedSurveysCount.map((function(e,t,a){return 0==t?e+1:e})),isFetching:!1});case"ADD_SKILL":return Nn({},e,{skills:[t.payload].concat(Object(R.a)(e.skills)),isFetching:!1});case"GET_TEAMLEADS":return Nn({},e,{teamleads:t.payload,isFetching:!1});case"ADD_TEAMLEAD":return Nn({},e,{teamleads:[t.payload].concat(Object(R.a)(e.teamleads)),isFetching:!1});case"ADD_DSAT_CODE1":return Nn({},e,{dsat_code1:[t.payload].concat(Object(R.a)(e.dsat_code1)),isFetching:!1});case"ADD_BB_DRIVER_CODE2":return Nn({},e,{bb_driver_code2:[t.payload].concat(Object(R.a)(e.bb_driver_code2)),isFetching:!1});case"ADD_BB_DRIVER_CODE3":return Nn({},e,{bb_driver_code3:[t.payload].concat(Object(R.a)(e.bb_driver_code3)),isFetching:!1});case"UPDATE_SURVEY":return Nn({},e,{surveys_view:[t.payload].concat(Object(R.a)(e.surveys_view.filter((function(e){return e.reference_number!==t.payload.reference_number})))),surveys:[t.payload].concat(Object(R.a)(e.surveys.filter((function(e){return e.reference_number!==t.payload.reference_number})))),isFetching:!1});case"UPDATE_RCA":return Nn({},e,{rcas:e.rcas.map((function(e){return e.id==t.payload.id?t.payload:e})),isFetching:!1});case"DELETE_RCA":return Nn({},e,{rcas:e.rcas.filter((function(e){return t.payload.id!=e.id})),bottombox:[t.payload].concat(Object(R.a)(e.bottombox)),pieChartCompletedSurveysCount:e.pieChartCompletedSurveysCount.map((function(e,t,a){return 0==t?e-1:e})),isFetching:!1});case"UPDATE_AGENT":return Nn({},e,{agents:e.agents.map((function(e){return e.operator_lan_id==t.payload.operator_lan_id?t.payload:e})),agent:Nn({},t.payload),isFetching:!1});case"ADD_AGENT":return Nn({},e,{agents:[t.payload].concat(Object(R.a)(e.agents)),isFetching:!1});case"GET_RCA":return Nn({},e,{rca:e.rcas.find((function(e){return t.payload==e.surveyed_ticket}))});case"REMOVE_RCA":return Nn({},e,{rca:{}});default:return e}},Mn={msg:{},status:null},In={};function Ln(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function zn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ln(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ln(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Bn={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},Un={isOpen:!1},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_TOGGLE":return{isOpen:!e.isOpen};default:return e}};function Gn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gn(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gn(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Vn={page:0,search:"",ccms_list:[],isFetching:!1,comments:[],business_unit:null,ticket_status:null,escalation_type:null,accountable_team:null,site_code:null,ccms_owner:null,ccms_status:null,ticket_type:null,silo:null,selected_ccms:null,ccms_list_per_user:null,collapse:!1,filtered_ccms_list:[],ccms_admin_list:null,users_list:null,modal:!1,is_fetching_comments:!1,access_request:null,cause_code:null,escalation_driver:null,escalation_driver_cause:null,ccms_rca:null,ccms_rca_modal:!1,activeTab:1,fni:null,ca:null},Wn=function(e,t){return e.map((function(e){return e.id==t.id?t:e}))},Kn=function(e,t){return e.filter((function(e){return e.id!=t.id}))},Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TABLE_PAGE":return Yn({},e,{page:t.payload});case"SEARCH":return Yn({},e,{filtered_ccms_list:e.ccms_list.filter((function(e){return t.payload==e.id||t.payload==e.escalated_ticket||t.payload==e.escalated_email_address||t.payload==e.escalated_name})),search:t.payload});case"EDIT_ESCALATION_TYPE":return Yn({},e,{escalation_type:Wn(e.escalation_type,t.payload)});case"ADD_ESCALATION_TYPE":return Yn({},e,{escalation_type:[t.payload].concat(Object(R.a)(e.escalation_type))});case"DELETE_ESCALATION_TYPE":return Yn({},e,{escalation_type:Kn(e.escalation_type,t.payload)});case"EDIT_ACCOUNTABLE_TEAM":return Yn({},e,{accountable_team:Wn(e.accountable_team,t.payload)});case"ADD_ACCOUNTABLE_TEAM":return Yn({},e,{accountable_team:[t.payload].concat(Object(R.a)(e.accountable_team))});case"DELETE_ACCOUNTABLE_TEAM":return Yn({},e,{accountable_team:Kn(e.accountable_team,t.payload)});case"EDIT_SITE_CODE":return Yn({},e,{site_code:Wn(e.site_code,t.payload)});case"ADD_SITE_CODE":return Yn({},e,{site_code:[t.payload].concat(Object(R.a)(e.site_code))});case"DELETE_SITE_CODE":return Yn({},e,{site_code:Kn(e.site_code,t.payload)});case"EDIT_CCMS_STATUS":return Yn({},e,{ccms_status:Wn(e.ccms_status,t.payload)});case"ADD_CCMS_STATUS":return Yn({},e,{ccms_status:[t.payload].concat(Object(R.a)(e.ccms_status))});case"DELETE_CCMS_STATUS":return Yn({},e,{ccms_status:Kn(e.ccms_status,t.payload)});case"EDIT_SILO":return Yn({},e,{silo:Wn(e.silo,t.payload)});case"ADD_SILO":return Yn({},e,{silo:[t.payload].concat(Object(R.a)(e.silo))});case"DELETE_SILO":return Yn({},e,{silo:Kn(e.silo,t.payload)});case"EDIT_TICKET_TYPE":return Yn({},e,{ticket_type:Wn(e.ticket_type,t.payload)});case"ADD_TICKET_TYPE":return Yn({},e,{ticket_type:[t.payload].concat(Object(R.a)(e.ticket_type))});case"DELETE_TICKET_TYPE":return Yn({},e,{ticket_type:Kn(e.ticket_type,t.payload)});case"EDIT_BUSINESS_UNIT":return Yn({},e,{business_unit:Wn(e.business_unit,t.payload)});case"ADD_BUSINESS_UNIT":return Yn({},e,{business_unit:[t.payload].concat(Object(R.a)(e.business_unit))});case"DELETE_BUSINESS_UNIT":return Yn({},e,{business_unit:Kn(e.business_unit,t.payload)});case"GET_CA_LIST":return Yn({},e,{ca:t.payload});case"SUBMIT_CA":return Yn({},e,{ca:[].concat(Object(R.a)(e.ca),[t.payload])});case"GET_FNI_LIST":return Yn({},e,{fni:t.payload});case"COMPLETE_FNI":return Yn({},e,{fni:[].concat(Object(R.a)(e.fni),[t.payload])});case"TOGGLE_ACTIVE_TAB":return Yn({},e,{activeTab:t.payload});case"CLOSE_RCA_MODAL":return Yn({},e,{ccms_rca_modal:!1,ccms_rca:null,fni:null,ca:null});case"COMPLETE_CCMS_RCA":return Yn({},e,{ccms_rca:t.payload,ccms_list:e.ccms_list.map((function(e){return e.id===t.payload.ccms?Yn({},e,{is_rca_completed:!0}):e}))});case"GET_CCMS_RCA":return Yn({},e,{ccms_rca:t.payload[0],ccms_rca_modal:!0});case"ADD_ESCALATION_DRIVER_CAUSE":return Yn({},e,{escalation_driver_cause:[].concat(Object(R.a)(e.escalation_driver_cause),[t.payload])});case"ADD_ESCALATION_DRIVER":return Yn({},e,{escalation_driver:[].concat(Object(R.a)(e.escalation_driver),[t.payload])});case"DELETE_ESCALATION_DRIVER_CAUSE":return Yn({},e,{escalation_driver_cause:Kn(e.escalation_driver_cause,t.payload)});case"DELETE_ESCALATION_DRIVER":return Yn({},e,{escalation_driver:Kn(e.escalation_driver,t.payload)});case"EDIT_ESCALATION_DRIVER_CAUSE":return Yn({},e,{escalation_driver_cause:Wn(e.escalation_driver_cause,t.payload)});case"EDIT_ESCALATION_DRIVER":return Yn({},e,{escalation_driver:Wn(e.escalation_driver,t.payload)});case"EDIT_CAUSE_CODE":return Yn({},e,{cause_code:Wn(e.cause_code,t.payload)});case"DELETE_CAUSE_CODE":return Yn({},e,{cause_code:Kn(e.cause_code,t.payload),escalation_driver:e.escalation_driver.filter((function(e){return e.cause_code!=t.payload.id}))});case"ADD_CAUSE_CODE":return Yn({},e,{cause_code:[].concat(Object(R.a)(e.cause_code),[t.payload])});case"GET_ESCALATION_DRIVER_CAUSE":return Yn({},e,{escalation_driver_cause:t.payload});case"GET_ESCALATION_DRIVER":return Yn({},e,{escalation_driver:t.payload});case"GET_CAUSE_CODE":return Yn({},e,{cause_code:t.payload});case"REMOVE_ACCESS_REQUEST":return Yn({},e,{access_request:e.access_request.filter((function(e){return e.id!=t.payload.id}))});case"ADD_CCMS_OWNER":return Yn({},e,{ccms_owner:[].concat(Object(R.a)(e.ccms_owner),[t.payload])});case"GET_REQUEST_ACCESS":return Yn({},e,{access_request:0!=t.payload.length?t.payload:null});case"DENY_REQUEST_ACCESS":return Yn({},e,{access_request:Kn(e.access_request,t.payload)});case"ADD_REQUEST_ACCESS":return Yn({},e,{access_request:[t.payload].concat(Object(R.a)(e.access_request))});case"FETCHING_COMMENTS":return Yn({},e,{is_fetching_comments:!0});case"OPEN_MODAL":return Yn({},e,{modal:!0});case"CLOSE_MODAL":return Yn({},e,{modal:!1,selected_ccms:null,comments:[]});case"TOGGLE_MODAL":return Yn({},e,{modal:!e.modal});case g:return Yn({},e,{isFetching:!0});case"GET_USERS_LIST":return Yn({},e,{users_list:t.payload});case"GET_CCMS_ADMIN_LIST":return Yn({},e,{ccms_admin_list:t.payload});case"CLOSE_COLLAPSE":return Yn({},e,{collapse:!1});case"OPEN_COLLAPSE":return Yn({},e,{collapse:!0});case v:return Yn({},e,{isFetching:!1});case"GET_CCMS_LIST_PER_USER":return Yn({},e,{ccms_list_per_user:t.payload});case"ADD_COMMENT":return Yn({},e,{comments:[].concat(Object(R.a)(e.comments),[t.payload]),selected_ccms:Yn({},e.selected_ccms,{ccms_status:t.payload.ccms.ccms_status})});case"ADD_USER_TO_CCMS_ADMIN":return Yn({},e,{ccms_admin_list:[].concat(Object(R.a)(e.ccms_admin_list),[t.payload])});case"REMOVE_USER_FROM_CCMS_ADMIN":return Yn({},e,{ccms_admin_list:e.ccms_admin_list.filter((function(e){return e.id!=t.payload.id}))});case"REMOVE_SELECTED_CCMS":return Yn({},e,{selected_ccms:null,collapse:!1});case"GET_SELECTED_CCMS":return Yn({},e,{selected_ccms:t.payload.selected_ccms,comments:t.payload.comments,is_fetching_comments:!1,modal:!0});case"GET_SELECTED_CCMS_ONLY":return Yn({},e,{selected_ccms:t.payload});case"GET_SILO":return Yn({},e,{silo:t.payload});case"GET_TICKET_TYPE":return Yn({},e,{ticket_type:t.payload});case"GET_CCMS_STATUS":return Yn({},e,{ccms_status:t.payload});case"GET_CCMS_OWNER":return Yn({},e,{ccms_owner:t.payload});case"GET_SITE_CODE":return Yn({},e,{site_code:t.payload});case"GET_ACCOUNTABLE_TEAM":return Yn({},e,{accountable_team:t.payload});case"GET_ESCALATION_TYPE":return Yn({},e,{escalation_type:t.payload});case"GET_TICKET_STATUS":return Yn({},e,{ticket_status:t.payload});case"GET_BUSINESS_UNIT":return Yn({},e,{business_unit:t.payload});case"GET_CCMS":return Yn({},e,{ccms_list:t.payload});case"GET_COMMENTS":return Yn({},e,{comments:t.payload,is_fetching_comments:!1});case"ACK_ENTRY":return Yn({},e,{ccms_list:e.ccms_list.map((function(e){return e.id==t.payload.id?t.payload:e}))});case"COMPLETE_CCMS":return Yn({},e,{ccms_list:Wn(e.ccms_list,t.payload.completed_ccms),selected_ccms:t.payload.completed_ccms,comments:[].concat(Object(R.a)(e.comments),[t.payload.comment]),isFetching:!1});case"UPDATE_CCMS":return Yn({},e,{ccms_list:Wn(e.ccms_list,t.payload),selected_ccms:t.payload});case"ADD_UPDATE":return Yn({},e,{comments:[].concat(Object(R.a)(e.comments),[t.payload])});default:return e}},Qn=Object(jn.combineReducers)({surveys:Rn,modal:qn,errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return zn({},e,{isLoading:!0});case"USER_LOADED":return zn({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload[0]});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),zn({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),zn({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGES":case"CREATE_MESSAGE":return t.payload;default:return e}},ccms:Hn}),Xn=[Tn.a],Jn=Object(jn.createStore)(Qn,{},Object(wn.composeWithDevTools)(jn.applyMiddleware.apply(void 0,Xn))),Zn=(a(559),a(560),a(561),{timeout:6e3,position:"bottom center"}),$n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getCreds(),a.state={isAuthenticated:!1,user:{},error:null},a}return Object(_.a)(t,e),Object(m.a)(t,[{key:"getCreds",value:function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn.dispatch((function(e){e({type:"USER_LOADING"}),C.a.get("/api/cba_auth").then((function(t){e({type:"USER_LOADED",payload:t.data})}))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"setErrorMessage",value:function(e,t){this.setState({error:{message:e,debug:t}})}},{key:"render",value:function(){return this.state.error&&r.a.createElement(vn,{message:this.state.error.message,debug:this.state.error.debug}),r.a.createElement(b.a,{store:Jn},r.a.createElement(en.a,Object.assign({template:kn.a},Zn),r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(En,null),r.a.createElement(an,null),r.a.createElement(f.a,{exact:!0,path:"/cba",render:function(e){return r.a.createElement(Dn,null)}}),r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(sn,{name:"BottomBox",exact:!0,path:"/bottombox",component:$a}),r.a.createElement(sn,{name:"Ccms",exact:!0,path:"/ccms",component:wt})))))))}}]),t}(n.Component);l.a.render(r.a.createElement($n,null),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.b0f66132.chunk.js.map